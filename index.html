<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#fffcf1">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZEZQRBTLR7"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-ZEZQRBTLR7');
    </script>
    <title>Free Pattern Reset Quiz: Discover Your Life Pattern | Pattern Reset™</title>
    <meta name="description" content="Take our free pattern recognition quiz to identify the emotional loop driving your relationships, habits, and choices. Get your personalized Pattern Reset Workbook to break toxic patterns and transform your life.">
    <meta name="author" content="Pattern Reset™">
    <meta name="copyright" content="© 2026 Pattern Reset™. All rights reserved.">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="keywords" content="pattern recognition quiz, relationship patterns, break toxic patterns, emotional patterns, behavioral patterns, life patterns, stuck in patterns, pattern reset, free pattern quiz, discover your pattern">
    <meta name="brand" content="Pattern Reset™">
    <meta name="trademark" content="Pattern Reset™, Heart Matters™, The Heart Room™, Let It Out™, Still Healing Collection™">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Free Pattern Reset Quiz: Discover Your Life Pattern | Pattern Reset™">
    <meta property="og:description" content="Take our free pattern recognition quiz to identify the emotional loop driving your relationships, habits, and choices. Get your personalized Pattern Reset Workbook to break toxic patterns and transform your life.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mypatternreset.com/">
    <meta property="og:image" content="https://mypatternreset.com/images/Let%20It%20Out%20Logo.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://mypatternreset.com/">
    
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Free Pattern Reset Quiz: Discover Your Life Pattern | Pattern Reset™">
    <meta name="twitter:description" content="Take our free pattern recognition quiz to identify the emotional loop driving your relationships, habits, and choices. Get your personalized Pattern Reset Workbook to break toxic patterns and transform your life.">
    <meta name="twitter:image" content="https://mypatternreset.com/images/Let%20It%20Out%20Logo.png">
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Pattern Reset™",
      "description": "Discover your life pattern through our free pattern recognition quiz. Identify the emotional loop driving your relationships, habits, and choices. Break toxic patterns and transform your life with our free Pattern Reset Workbook.",
      "url": "https://mypatternreset.com/",
      "logo": "https://mypatternreset.com/images/Let%20It%20Out%20Logo.png",
      "sameAs": [
        "https://www.instagram.com/heartmatters__/",
        "https://www.tiktok.com/@heartmatters__"
      ],
      "foundingDate": "2024",
      "mission": "Cut Ties. Break Patterns. Begin Again.",
      "brand": {
        "@type": "Brand",
        "name": "Pattern Reset™",
        "description": "Pattern recognition and life transformation"
      }
    }
    </script>
    
    <!-- Quiz Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Quiz",
      "name": "Pattern Reset Quiz",
      "description": "Free pattern recognition quiz to identify the emotional loop driving your relationships, habits, confidence, and choices. Discover your dominant pattern, emotional drivers, and get your personalized Pattern Reset Workbook.",
      "url": "https://mypatternreset.com/",
      "educationalLevel": "General Audience",
      "learningResourceType": "Assessment",
      "teaches": "Pattern recognition, self-awareness, emotional intelligence, relationship patterns, behavioral patterns",
      "assesses": "Emotional patterns, relationship behaviors, life patterns, childhood origins, emotional drivers (Control, Validation, Avoidance, Fear of Rejection)",
      "timeRequired": "PT5M",
      "numberOfQuestions": 32,
      "typicalAgeRange": "18-",
      "about": {
        "@type": "Thing",
        "name": "Life Patterns, Relationship Patterns, Emotional Patterns, Behavioral Patterns"
      },
      "provider": {
        "@type": "Organization",
        "name": "Pattern Reset™",
        "url": "https://mypatternreset.com/"
      }
    }
    </script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Anton&family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700;9..40,800;9..40,900&display=block" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700;9..40,800;9..40,900&display=block" rel="stylesheet">
    <noscript>
        <link href="https://fonts.googleapis.com/css2?family=Anton&family=DM+Sans:opsz,wght@9..40,400;9..40,500;9..40,600;9..40,700;9..40,800;9..40,900&display=block" rel="stylesheet">
    </noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css?v=4">
    <!-- html2pdf.js for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
    .letitout-link {
        font-family: 'Anton', sans-serif !important;
        font-weight: bold !important;
        letter-spacing: 1.5px;
    }
    /* Remove page-specific nav link font-weight override */
    
    /* Start Here Section Styles */
    .start-here-section {
        background: #fffcf1;
        padding: 4rem 0 4rem 0;
        width: 100vw;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .start-here-content {
        max-width: 1200px;
        width: 100%;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .start-here-title {
        font-family: 'Anton', sans-serif;
        font-size: 3rem;
        color: #000;
        margin-bottom: 1rem;
        text-align: center;
        letter-spacing: -0.5px;
        font-weight: 700;
        text-transform: uppercase;
    }
    .start-here-subtext {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.35rem;
        font-weight: 700;
        color: #ca0013;
        text-align: center;
        margin-bottom: 1.5rem;
        line-height: 1.7;
    }
    .mobile-break {
        display: none;
    }
    .start-here-card-grid {
        display: flex;
        flex-direction: row;
        gap: 1rem;
        width: 100%;
        justify-content: center;
        align-items: stretch;
        flex-wrap: wrap;
    }
    .start-here-card {
        background: transparent;
        border: 2px solid #ca0013;
        border-radius: 12px;
        box-shadow: none;
        padding: 2.5rem 2rem;
        min-width: 240px;
        max-width: 300px;
        flex: 1 1 260px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        margin-bottom: 0;
        height: 100%;
        min-height: 320px;
        max-height: 320px;
        position: relative;
    }
    .start-here-card.card-red {
        background: transparent;
        color: #000000;
        border: 2px solid #ca0013;
    }
    .start-here-card.card-red h3,
    .start-here-card.card-red p {
        color: #000000;
    }
    .start-here-card h3 {
        color: #000000;
        margin-bottom: 1rem;
        font-family: 'Anton', sans-serif;
        font-size: 1.6rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .start-here-card p {
        font-family: 'DM Sans', sans-serif;
        font-size: 1rem;
        font-weight: 500;
        color: #000000;
        margin-bottom: 0;
        line-height: 1.6;
    }
    .start-here-card.card-red p {
        color: #000000 !important;
    }
    
    .start-here-icon {
        margin-bottom: 1.5rem;
        padding: 1rem;
        border-radius: 50%;
        background: #ca0013;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 60px;
        height: 60px;
    }
    
    .start-here-card .btn {
        margin-top: auto;
        width: 80%;
        font-size: 0.92rem;
        font-family: 'DM Sans', sans-serif;
        font-weight: 700;
        border-radius: 4px;
        padding: 0.7rem 1.2rem;
        letter-spacing: 0.7px;
        box-shadow: none;
        max-width: 70%;
    }
    
    /* New CTA button styling for "This Is Where Healing Begins" cards */
    .start-here-cta {
        background: transparent !important;
        border: 1px solid rgba(255, 252, 241, 0.3) !important;
        color: #fffcf1 !important;
        font-size: 0.85rem !important;
        padding: 0.6rem 1rem !important;
        transition: all 0.3s ease !important;
        backdrop-filter: blur(5px) !important;
    }
    
    .start-here-cta:hover {
        background: rgba(255, 252, 241, 0.1) !important;
        border-color: rgba(255, 252, 241, 0.5) !important;
        transform: translateY(-1px) !important;
        box-shadow: 0 2px 8px rgba(255, 252, 241, 0.2) !important;
    }
    
    /* Clickable card styling */
    .start-here-clickable {
        text-decoration: none !important;
        color: inherit !important;
        cursor: pointer !important;
        transition: all 0.3s ease !important;
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        justify-content: center !important;
        text-align: center !important;
        padding: 2.5rem 2rem !important;
        position: relative !important;
        overflow: hidden !important;
    }
    
    .start-here-clickable:hover {
        transform: translateY(-4px) !important;
        box-shadow: 0 8px 25px rgba(202, 0, 19, 0.15) !important;
        text-decoration: none !important;
        color: inherit !important;
        border-color: #ca0013 !important;
    }
    
    .start-here-clickable:focus {
        outline: 2px solid rgba(255, 252, 241, 0.5) !important;
        outline-offset: 2px !important;
    }
    .start-here-card.card-red .btn {
        background: #ca0013;
        color: #fff;
        border: none;
        font-weight: bold;
    }
    .start-here-card.card-red .btn[style*="pointer-events: none"] {
        background: #ca0013;
        color: #fff;
        opacity: 0.5;
    }

    @media (max-width: 1100px) {
        .start-here-content {
            max-width: 960px;
        }
        .start-here-card-grid {
            gap: 0.8rem;
        }
        .start-here-card {
            max-width: 250px;
            padding: 1.8rem 1rem 1.5rem 1rem;
            min-height: 300px;
        }
    }
    @media (min-width: 601px) and (max-width: 900px) {
        .start-here-title {
            font-size: 2.5rem;
            margin-bottom: 1.3rem;
        }
        .start-here-subtext {
            font-size: 1.1rem;
        }
        .start-here-card-grid {
            gap: 1rem;
        }
    }
    @media (max-width: 600px) {
        .start-here-section {
            padding: 2rem 0 3rem 0;
        }
        .start-here-title {
            font-size: 2rem !important;
            margin-bottom: 0.8rem !important;
        }
        .start-here-title .mobile-break {
            display: block;
        }
        .start-here-subtext {
            font-size: 1.125rem !important;
            font-weight: 700 !important;
            line-height: 1.8 !important;
            margin-bottom: 1.2rem;
        }
        .start-here-card-grid {
            flex-direction: column;
            gap: 1rem;
            justify-content: center;
            align-items: center;
            width: 100%;
        }
        .start-here-card {
            max-width: 100%;
            width: 100%;
            min-width: 0;
            margin-bottom: 0;
            padding: 2rem 1.5rem !important;
            min-height: 300px;
        }
        .start-here-card h3 {
            color: #000000 !important;
            margin-bottom: 0.8rem !important;
            font-size: 1.3rem !important;
        }
        .start-here-card p {
            font-size: 0.95rem !important;
            font-weight: 500 !important;
            line-height: 1.5 !important;
            color: #000000 !important;
        }
        .start-here-card .btn {
            margin-top: 0;
            width: 75%;
            max-width: 65%;
        }
        .start-here-card p:last-of-type {
            margin-bottom: 1.5rem !important;
        }
    }
    @media (max-width: 600px) {
        .card-spacer {
            height: 1.5rem;
            width: 100%;
            display: block;
        }
    }

    /* Quiz Section Styles */
    .quiz-section {
        background: #f5f5f5;
        padding: 4rem 0;
        width: 100vw;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
        scroll-margin-top: 100px;
        min-height: 100vh;
    }

    .quiz-container {
        max-width: 1200px;
        width: 100%;
        margin: 0 auto;
        padding: 0 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        min-height: 100%;
        flex: 1;
    }

    .quiz-intro {
        text-align: center;
        margin: 0 auto;
        max-width: 900px;
        width: 100%;
        background: transparent;
        padding: 4rem 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        min-height: 700px;
    }

    .quiz-heart-icon {
        margin-bottom: 2.5rem;
        margin-top: -1rem;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .quiz-heart-icon svg {
        width: 56px;
        height: 56px;
        animation: spiralRotate 6s linear infinite;
    }

    .quiz-heart-icon:hover svg {
        animation-duration: 3s;
    }

    @keyframes spiralRotate {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }

    .quiz-title {
        font-family: 'Anton', sans-serif;
        font-size: 3rem;
        color: #000;
        margin-bottom: 1.5rem;
        text-align: center;
        letter-spacing: -0.5px;
        font-weight: 700;
        text-transform: uppercase;
        line-height: 1.2;
    }
    
    .quiz-title-highlight {
        color: #ca0013;
    }

    .quiz-subtitle {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.25rem;
        font-weight: 500;
        color: #333;
        text-align: center;
        margin-bottom: 1.5rem;
        line-height: 1.8;
        max-width: 700px;
    }

    .quiz-time-indicator {
        font-family: 'DM Sans', sans-serif;
        font-size: 1rem;
        font-weight: 500;
        color: #666;
        text-align: center;
        margin: 0 auto 2rem;
        line-height: 1.5;
    }
    
    .quiz-honesty-instruction {
        font-family: 'DM Sans', sans-serif;
        font-size: 0.95rem;
        font-weight: 400;
        color: #666;
        text-align: center;
        margin: 0 auto 2rem;
        line-height: 1.5;
        font-style: italic;
    }

    .quiz-intro .btn-mission-primary,
    #start-quiz-btn.btn-mission-primary {
        background: #ca0013 !important;
        color: #ffffff !important;
        border: 2px solid #ca0013 !important;
        padding: 1.1rem 2.5rem;
        font-size: 1.1rem;
        min-height: 56px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .quiz-intro .btn-mission-primary:hover,
    .quiz-intro .btn-mission-primary:focus,
    .quiz-intro .btn-mission-primary:active,
    #start-quiz-btn.btn-mission-primary:hover,
    #start-quiz-btn.btn-mission-primary:focus,
    #start-quiz-btn.btn-mission-primary:active {
        background: #b80011 !important;
        color: #ffffff !important;
        border: 2px solid #b80011 !important;
        outline: none;
        transform: translateY(-1px);
    }

    .quiz-content {
        width: 100%;
        max-width: 800px;
        background: transparent;
        padding: 4rem 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        margin: 0 auto;
        min-height: 700px;
    }

    .quiz-progress {
        width: 100%;
        margin-bottom: 3rem;
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .quiz-progress-bar {
        height: 6px;
        background: rgba(0, 0, 0, 0.06);
        border-radius: 3px;
        flex-grow: 1;
        position: relative;
        overflow: hidden;
    }

    .quiz-progress-bar-fill {
        height: 100%;
        background: #ca0013;
        border-radius: 3px;
        transition: width 0.4s ease-out;
    }

    .quiz-progress-text {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.1rem;
        font-weight: 700;
        color: #333;
        white-space: nowrap;
        letter-spacing: 0.3px;
    }

    .quiz-question-container {
        width: 100%;
        margin-bottom: 2rem;
    }

    .quiz-question {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.75rem;
        font-weight: 600;
        color: #000;
        margin-bottom: 2.5rem;
        line-height: 1.7;
        letter-spacing: -0.2px;
    }

    .quiz-options {
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
        margin-bottom: 3rem;
    }

    .quiz-option {
        background: transparent;
        border: 1.5px solid rgba(0, 0, 0, 0.1);
        border-radius: 6px;
        padding: 1.25rem 1.75rem;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .quiz-option:hover {
        background: rgba(202, 0, 19, 0.03);
        border-color: rgba(202, 0, 19, 0.3);
        transform: translateX(4px);
    }

    .quiz-option.selected {
        background: rgba(202, 0, 19, 0.08);
        border-color: #ca0013;
        border-width: 2px;
    }

    .quiz-option.selected .quiz-option-text {
        color: #ca0013;
        font-weight: 600;
    }

    .quiz-option-text {
        font-family: 'DM Sans', sans-serif;
        font-size: 1rem;
        font-weight: 500;
        color: #333;
        line-height: 1.6;
    }

    .quiz-birthdate-input {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-bottom: 1rem;
    }

    #quiz-birthdate-input {
        background: #f9f9f9;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        padding: 1rem 1.5rem;
        font-family: 'DM Sans', sans-serif;
        font-size: 1rem;
        font-weight: 500;
        color: #333;
        width: 100%;
        box-sizing: border-box;
        transition: all 0.3s ease;
        outline: none;
    }

    #quiz-birthdate-input:hover {
        background: #f0f0f0;
        border-color: #ca0013;
    }

    #quiz-birthdate-input:focus {
        background: #fff;
        border-color: #ca0013;
        box-shadow: 0 0 0 3px rgba(202, 0, 19, 0.1);
    }

    .quiz-birthdate-hint {
        font-family: 'DM Sans', sans-serif;
        font-size: 0.875rem;
        color: #666;
        font-style: italic;
        margin-top: 0.25rem;
    }

    .quiz-relationship-status-input {
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        margin-bottom: 1rem;
    }

    .quiz-select {
        background: #f9f9f9;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        padding: 1rem 1.5rem;
        font-family: 'DM Sans', sans-serif;
        font-size: 1rem;
        font-weight: 500;
        color: #333;
        width: 100%;
        box-sizing: border-box;
        transition: all 0.3s ease;
        outline: none;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23333' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 1.5rem center;
        background-size: 12px;
        padding-right: 3rem;
        cursor: pointer;
    }

    .quiz-select:hover {
        background-color: #f0f0f0;
        border-color: #ca0013;
    }

    .quiz-select:focus {
        background-color: #fff;
        border-color: #ca0013;
        box-shadow: 0 0 0 3px rgba(202, 0, 19, 0.1);
    }

    .quiz-select option {
        padding: 0.5rem;
        background-color: #fff;
    }

    .quiz-navigation {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
    }

    .quiz-navigation-buttons {
        width: 100%;
        display: flex;
        justify-content: space-between;
        gap: 1rem;
    }

    #quiz-prev-btn,
    #quiz-next-btn {
        flex: 1;
        max-width: 200px;
        transition: all 0.3s ease;
    }

    /* Inactive Next button state (no answer selected) */
    #quiz-next-btn.btn-mission {
        opacity: 0.7;
    }

    #quiz-next-btn.btn-mission:hover {
        opacity: 1;
        background: transparent;
        color: #ca0013;
        border-color: #ca0013;
    }

    /* Active Next button state (answer selected) */
    #quiz-next-btn.btn-mission-primary {
        opacity: 1;
        cursor: pointer;
    }

    #quiz-next-btn.btn-mission-primary:hover,
    #quiz-next-btn.btn-mission-primary:focus {
        background: #000 !important;
        color: #fff !important;
        border-color: #000 !important;
    }

    /* Previous button - grey inactive style */
    #quiz-prev-btn.btn-mission {
        background: transparent !important;
        color: #666 !important;
        border: 2px solid #999 !important;
        opacity: 1;
    }

    #quiz-prev-btn.btn-mission:hover,
    #quiz-prev-btn.btn-mission:focus {
        background: #666 !important;
        color: #fff !important;
        border-color: #666 !important;
        opacity: 1;
    }

    .quiz-error-message {
        font-family: 'DM Sans', sans-serif;
        font-size: 0.95rem;
        color: #ca0013;
        text-align: center;
        margin: 0.75rem auto 0;
        padding: 0.75rem 1.25rem;
        background: rgba(202, 0, 19, 0.08);
        border: 1px solid rgba(202, 0, 19, 0.2);
        border-radius: 8px;
        width: auto;
        min-width: fit-content;
        max-width: none;
        animation: fadeIn 0.3s ease-out;
        white-space: nowrap;
        display: inline-block;
        box-sizing: border-box;
    }

    .quiz-results {
        width: 100%;
        max-width: 800px;
        background: transparent;
        padding: 4rem 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        position: relative;
        margin: 0 auto;
        min-height: 700px;
    }

    .quiz-score-display {
        font-family: 'DM Sans', sans-serif;
        font-size: 3rem;
        font-weight: 700;
        color: #ca0013;
        margin-bottom: 1.5rem;
    }

    .quiz-results-title {
        font-family: 'Anton', sans-serif;
        font-size: 2.7rem;
        color: #000000;
        margin-bottom: 1.5rem;
        text-align: center;
        letter-spacing: 0.5px;
        font-weight: 700;
        text-transform: uppercase;
        line-height: 1.3;
        margin-top: 0;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        flex-wrap: wrap;
    }
    
    .dominance-label {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.2rem;
        font-weight: 500;
        text-transform: none;
        color: #666;
        letter-spacing: 0;
    }

    .pattern-name-display {
        font-family: 'Anton', sans-serif;
        font-size: 2.5rem;
        color: #ca0013;
        text-align: center;
        margin-bottom: 1.5rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        line-height: 1.2;
    }

    .pattern-name-display strong {
        font-weight: 700;
    }

    .archetype-subtitle {
        font-family: 'DM Sans', sans-serif;
        font-size: 1rem;
        color: #666;
        text-align: center;
        margin-top: 0.75rem;
        margin-bottom: 0;
        font-style: italic;
        font-weight: 400;
        letter-spacing: 0.3px;
    }

    .pattern-strength-display {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.3rem;
        color: #333;
        text-align: center;
        margin-bottom: 1rem;
        font-weight: 600;
    }

    .strength-label {
        font-size: 1rem;
        font-weight: 500;
        color: #666;
        text-transform: none;
    }

    .pattern-strength-explanation {
        font-family: 'DM Sans', sans-serif;
        font-size: 0.95rem;
        color: #666;
        text-align: center;
        margin-bottom: 1.5rem;
        padding: 0 1rem;
        line-height: 1.5;
        font-style: italic;
    }

    .top-drivers-preview {
        margin-top: 2rem;
        padding: 0;
        background: transparent;
        border: none;
    }

    .top-drivers-title {
        font-family: 'DM Sans', sans-serif;
        font-size: 0.9rem;
        font-weight: 500;
        color: #666;
        margin-bottom: 1.25rem;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .top-drivers-list {
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
        margin-bottom: 1.5rem;
    }

    .gatekeep-message {
        font-family: 'DM Sans', sans-serif;
        font-size: 0.8rem;
        color: #999;
        text-align: center;
        font-weight: 400;
        font-style: italic;
        margin-top: 1.5rem;
        padding-top: 0;
        border: none;
    }

    .driver-item {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        padding: 0;
        background: transparent;
        border: none;
        opacity: 0;
        animation: fadeInUp 0.5s ease forwards;
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .driver-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.4rem;
    }

    .driver-name {
        font-family: 'DM Sans', sans-serif;
        font-size: 0.9rem;
        color: #666;
        font-weight: 500;
    }

    .driver-percentage {
        font-family: 'DM Sans', sans-serif;
        font-size: 0.9rem;
        color: #ca0013;
        font-weight: 600;
    }

    .driver-progress-bar {
        width: 100%;
        height: 6px;
        background: #f5f5f5;
        border-radius: 3px;
        overflow: hidden;
        position: relative;
    }

    .driver-progress-fill {
        height: 100%;
        background: #ca0013;
        border-radius: 3px;
        transition: width 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
    }

    

    .quiz-results-description {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.25rem;
        font-weight: 500;
        color: #333;
        margin-bottom: 3rem;
        line-height: 1.8;
        max-width: 600px;
    }

    .quiz-pattern-details {
        width: 100%;
        max-width: 700px;
        margin: 2rem 0;
        text-align: left;
    }

    .quiz-pattern-section {
        margin-bottom: 2.5rem;
        padding: 0;
        background: transparent;
        border-left: 3px solid rgba(202, 0, 19, 0.2);
        padding-left: 1.5rem;
    }

    .quiz-pattern-label {
        font-family: 'Anton', sans-serif;
        font-size: 1.2rem;
        color: #000;
        margin-bottom: 0.75rem;
        letter-spacing: 0.5px;
        font-weight: 700;
        text-transform: uppercase;
    }

    .quiz-pattern-text {
        font-family: 'DM Sans', sans-serif;
        font-size: 1rem;
        color: #333;
        line-height: 1.7;
        margin: 0;
    }

    .quiz-pattern-cta-section {
        background: transparent;
        border: 2px solid rgba(202, 0, 19, 0.2);
        border-left: 3px solid #ca0013;
        border-radius: 6px;
    }

    .quiz-pattern-cta-text {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.1rem;
        font-weight: 600;
        color: #ca0013;
        line-height: 1.7;
        margin: 0;
    }

    .quiz-email-capture {
        width: 100%;
        max-width: 600px;
        margin-top: 0;
    }

    .quiz-email-title {
        font-family: 'Anton', sans-serif;
        font-size: 1.8rem;
        color: #000000;
        margin-bottom: 1.5rem;
        margin-top: 0;
        text-align: center;
        letter-spacing: 0.5px;
        font-weight: 700;
        text-transform: none;
    }

    .quiz-email-subtitle {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.125rem;
        color: #333;
        text-align: center;
        margin-bottom: 2.5rem;
        line-height: 1.7;
    }
    
    #quiz-archetype-dynamic {
        font-weight: 700;
        color: #ca0013;
        font-style: italic;
    }

    .quiz-email-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        align-items: center;
    }

    .quiz-email-form button[type="submit"] {
        width: 100%;
        max-width: 100%;
        padding: 0.9rem 1rem;
        white-space: nowrap;
        text-align: center;
        font-size: 1rem;
        letter-spacing: 1.5px;
        box-sizing: border-box;
    }

    /* Button styling for quiz results form */
    .quiz-results .btn-mission-primary,
    .quiz-email-form .btn-mission-primary {
        background: #ca0013;
        color: #fff !important;
        border: 2px solid #ca0013;
        text-transform: uppercase;
        transition: all 0.3s ease;
    }

    .quiz-results .btn-mission-primary:hover,
    .quiz-results .btn-mission-primary:focus {
        background: #b80011;
        color: #fff;
        border-color: #b80011;
        transform: translateY(-1px);
    }

    #quiz-name-input,
    #quiz-email-input,
    #quiz-phone-input {
        padding: 1rem 1.25rem;
        border: 1.5px solid rgba(0, 0, 0, 0.12);
        border-radius: 6px;
        font-size: 1rem;
        font-family: 'DM Sans', sans-serif;
        color: #000;
        background: #fff;
        width: 100%;
        box-sizing: border-box;
        transition: all 0.3s ease;
    }

    #quiz-name-input:focus,
    #quiz-email-input:focus,
    #quiz-phone-input:focus {
        outline: none;
        border-color: #ca0013;
        background: #fff;
        box-shadow: 0 0 0 3px rgba(202, 0, 19, 0.08);
    }

    .quiz-success-message {
        text-align: center;
        width: 100%;
        max-width: 700px;
        padding: 4rem 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
        position: relative;
        min-height: 500px;
    }

    .quiz-success-title {
        font-family: 'Anton', sans-serif;
        font-size: 2.2rem;
        color: #000000;
        margin-bottom: 1.5rem;
        margin-top: 0;
        text-align: center;
        letter-spacing: 0.5px;
        font-weight: 700;
        text-transform: none;
        line-height: 1.3;
    }

    .quiz-success-subtitle {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.125rem;
        color: #333;
        text-align: center;
        margin-bottom: 2rem;
        line-height: 1.7;
    }

    .quiz-success-pattern-name {
        text-align: center;
        margin-bottom: 2rem;
        margin-top: 0;
        border: 2px solid #ca0013;
        border-radius: 8px;
        padding: 1.5rem 2rem;
        display: block;
        width: 100%;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        background: rgba(202, 0, 19, 0.08);
        box-shadow: 0 2px 8px rgba(202, 0, 19, 0.1);
    }
    
    .pattern-name-text {
        font-family: 'Anton', sans-serif;
        font-size: 2rem;
        color: #ca0013;
        letter-spacing: 0.5px;
        font-weight: 700;
        text-transform: uppercase;
        line-height: 1.2;
        display: block;
        margin-bottom: 0;
    }
    
    .pattern-strength-text {
        font-family: 'DM Sans', sans-serif;
        font-size: 0.9rem;
        color: #666;
        font-weight: 500;
        text-transform: none;
        letter-spacing: 0.3px;
        display: block;
        margin-top: 0.25rem;
    }
    
    .pattern-drivers-preview {
        font-family: 'DM Sans', sans-serif;
        font-size: 0.85rem;
        color: #333;
        font-weight: 400;
        text-transform: none;
        letter-spacing: 0.2px;
        display: block;
        margin-top: 0.5rem;
        padding-top: 0.5rem;
        border-top: 1px solid rgba(202, 0, 19, 0.2);
        line-height: 1.6;
        min-height: 1.5rem;
    }
    
    .pattern-drivers-preview:empty {
        display: none;
    }
    
    .pattern-drivers-preview .driver-item {
        display: inline-block;
        margin: 0 0.5rem;
    }
    
    .pattern-drivers-preview .driver-label {
        color: #333;
        font-weight: 500;
    }
    
    .pattern-drivers-preview .driver-value {
        color: #ca0013;
        font-weight: 600;
        margin-left: 0.25rem;
    }

    .quiz-success-value-copy {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.1rem;
        color: #333;
        text-align: center;
        margin-top: 1.5rem;
        margin-bottom: 0;
        line-height: 1.7;
        font-weight: 400;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        padding: 0 1.5rem;
    }

    .quiz-success-inbox-note {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.15rem;
        color: #555;
        text-align: center;
        margin-top: 0;
        margin-bottom: 2rem;
        line-height: 1.7;
        font-style: normal;
        font-weight: 400;
        padding: 0.75rem 1.25rem;
        background: transparent;
        border-left: 2px solid rgba(202, 0, 19, 0.3);
        border-radius: 0;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }
    
    .quiz-success-inbox-note .inbox-icon {
        font-size: 1.3rem;
        margin-right: 0.5rem;
        vertical-align: middle;
    }
    
    .quiz-success-inbox-note strong {
        color: #ca0013;
        font-weight: 600;
        font-size: 1.1rem;
    }

    .quiz-success-ready {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.25rem;
        font-weight: 600;
        color: #000;
        text-align: center;
        margin-bottom: 0.75rem;
        line-height: 1.5;
    }

    .quiz-success-description {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.125rem;
        color: #333;
        text-align: center;
        margin-bottom: 2.5rem;
        line-height: 1.7;
    }

    .quiz-success-description .desktop-break,
    .quiz-subtitle .desktop-break {
        display: inline;
    }

    .quiz-success-cta {
        display: inline-block;
        width: auto;
        min-width: 280px;
        margin-top: 0;
        margin-bottom: 0;
    }

    .quiz-cta-section {
        width: 100%;
        max-width: 600px;
        margin-top: 2rem;
    }

    .quiz-cta-text {
        font-family: 'DM Sans', sans-serif;
        font-size: 1.125rem;
        color: #333;
        margin-bottom: 1rem;
        line-height: 1.6;
    }

    .quiz-cta-text:last-of-type {
        margin-bottom: 2rem;
    }

    @media (min-width: 601px) and (max-width: 900px) {
        .quiz-section {
            padding: 4rem 0;
            scroll-margin-top: 110px;
            min-height: 100vh;
        }
        .quiz-title {
            font-size: 2.5rem;
            margin-bottom: 1.3rem;
        }
        .quiz-subtitle {
            font-size: 1.1rem;
        }
        .quiz-time-indicator {
            font-size: 0.95rem;
        }
        .quiz-honesty-instruction {
            font-size: 0.9rem;
        }
        .quiz-results-title {
            font-size: 2.2rem;
            color: #000000;
            text-transform: uppercase !important;
        }
        .dominance-label {
            font-size: 1.1rem;
        }
        .quiz-score-display {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        .quiz-success-title {
            font-size: 2rem;
            color: #000000;
            margin-bottom: 0.9rem;
        }
        .quiz-success-subtitle {
            margin-bottom: 1.75rem;
            color: #fff;
        }
        .quiz-success-inbox-note {
            font-size: 1.1rem;
            margin-top: 0;
            margin-bottom: 1.75rem;
            color: #555;
            line-height: 1.7;
            padding: 0.75rem 1.25rem;
            background: transparent;
            border-left: 2px solid rgba(202, 0, 19, 0.3);
            border-radius: 0;
        }
        
        .quiz-success-inbox-note strong {
            color: #ca0013;
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .quiz-success-inbox-note .inbox-icon {
            font-size: 1.2rem;
        }
        .quiz-success-pattern-name {
            margin-bottom: 1.75rem;
            border: 2px solid #ca0013;
            border-radius: 8px;
            padding: 1.35rem 1.85rem;
            display: block;
            width: 100%;
            max-width: 550px;
            margin-left: auto;
            margin-right: auto;
            background: rgba(202, 0, 19, 0.08);
            box-shadow: 0 2px 8px rgba(202, 0, 19, 0.1);
        }
        .pattern-name-text {
            font-size: 1.75rem;
            color: #ca0013;
            display: block;
            margin-bottom: 0;
        }
        .pattern-strength-text {
            font-size: 0.85rem;
            color: #666;
            display: block;
            margin-top: 0.2rem;
        }
        .pattern-drivers-preview {
            font-size: 0.8rem;
            color: #333;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid rgba(202, 0, 19, 0.2);
        }
        .pattern-drivers-preview .driver-label {
            color: #333;
        }
        .pattern-drivers-preview .driver-value {
            color: #ca0013;
        }
        .quiz-success-value-copy {
            font-size: 1.05rem;
            margin-top: 1.25rem;
            padding: 0 1.25rem;
            max-width: 550px;
        }
        .quiz-success-ready {
            font-size: 1.15rem;
            color: #000;
        }
        .quiz-success-description {
            margin-bottom: 2.25rem;
            color: #333;
        }
        .quiz-intro,
        .quiz-content,
        .quiz-results,
        .quiz-success-message {
            min-height: 700px;
        }
        .quiz-success-message {
            padding: 4rem 2rem;
        }
        .quiz-success-description .desktop-break,
        .quiz-subtitle .desktop-break {
            display: none;
        }
        .quiz-intro .btn-mission-primary {
            padding: 1rem 2rem;
            font-size: 1rem;
            min-height: 52px;
            background: #fff;
            color: #000000;
        }
        .quiz-intro .btn-mission-primary:hover,
        .quiz-intro .btn-mission-primary:focus,
        .quiz-intro .btn-mission-primary:active {
            background: transparent;
            color: #fffcf1;
        }
    }

    @media (max-width: 600px) {
        .quiz-section {
            padding: 3rem 0;
            scroll-margin-top: 120px;
            min-height: 100vh;
        }
        .quiz-container {
            padding: 0 1rem;
        }
        .quiz-intro {
            margin: 0 auto;
            padding: 2.5rem 1.5rem;
            max-width: 100%;
            min-height: 600px;
        }
        .quiz-heart-icon {
            margin-bottom: 2rem;
            margin-top: -0.5rem;
        }
        .quiz-heart-icon svg {
            width: 40px;
            height: 40px;
        }
        .quiz-title {
            font-size: 2rem !important;
            margin-bottom: 1rem !important;
        }
        .quiz-subtitle {
            font-size: 1.1rem !important;
            line-height: 1.7 !important;
            margin-bottom: 1.5rem;
            padding: 0 0.5rem;
        }
        .quiz-time-indicator {
            font-size: 0.95rem !important;
            margin-bottom: 1.5rem;
        }
        .quiz-intro .btn-mission-primary {
            padding: 1rem 2rem;
            font-size: 1rem;
            min-height: 50px;
            width: 100%;
            max-width: 300px;
            background: #fff;
            color: #000000;
        }
        .quiz-intro .btn-mission-primary:hover,
        .quiz-intro .btn-mission-primary:focus,
        .quiz-intro .btn-mission-primary:active {
            background: transparent;
            color: #fffcf1;
        }
        .quiz-content {
            padding: 2.5rem 1.5rem;
            margin: 0 auto;
            max-width: 100%;
            min-height: 600px;
        }
        .quiz-progress {
            margin-bottom: 1.5rem;
            flex-direction: row;
            align-items: center;
            gap: 1rem;
        }
        .quiz-progress-text {
            text-align: left;
            white-space: nowrap;
        }
        .quiz-question {
            font-size: 1.25rem !important;
            margin-bottom: 1rem;
        }
        .quiz-options {
            margin-bottom: 1.5rem;
            gap: 0.8rem;
        }
        .quiz-option {
            padding: 0.8rem 1rem;
        }
        .quiz-option-text {
            font-size: 0.95rem !important;
        }
        .quiz-navigation {
            gap: 0.8rem;
        }
        .quiz-navigation-buttons {
            flex-direction: column;
            gap: 0.8rem;
        }
        #quiz-prev-btn,
        #quiz-next-btn {
            max-width: 100%;
            width: 100%;
        }
        .quiz-error-message {
            max-width: 100%;
            width: 100%;
            font-size: 0.9rem;
            padding: 0.75rem 1rem;
            white-space: normal;
            display: block;
            margin: 0.5rem auto 0;
        }
        #quiz-birthdate-input {
            padding: 0.8rem 1rem;
            font-size: 0.95rem;
        }
        .quiz-birthdate-hint {
            font-size: 0.8rem;
        }
        .quiz-select {
            padding: 0.8rem 1rem;
            padding-right: 2.5rem;
            font-size: 0.95rem;
        }
        .quiz-results {
            padding: 2rem 1.5rem;
            margin: 0 auto;
            max-width: 100%;
            min-height: 600px;
        }
        .quiz-score-display {
            font-size: 2.5rem !important;
            margin-bottom: 1rem !important;
        }
        .quiz-results-title {
            font-size: 1.8rem !important;
            margin-bottom: 0.8rem !important;
            color: #000000 !important;
            text-transform: uppercase !important;
        }
        .pattern-name-display {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        .archetype-subtitle {
            font-size: 0.9rem;
            margin-top: 0.5rem;
            margin-bottom: 0;
        }
        .pattern-strength-display {
            font-size: 1.1rem;
            margin-bottom: 0.75rem;
        }
        .pattern-strength-explanation {
            font-size: 0.85rem;
            padding: 0 0.5rem;
            margin-bottom: 1rem;
        }
        .top-drivers-preview {
            margin-top: 1.5rem;
            padding: 0;
        }
        .top-drivers-title {
            font-size: 0.85rem;
            margin-bottom: 1rem;
        }
        .top-drivers-list {
            gap: 1rem;
            margin-bottom: 1.25rem;
        }
        .driver-item {
            padding: 0;
        }
        .driver-header {
            margin-bottom: 0.35rem;
        }
        .driver-name {
            font-size: 0.85rem;
        }
        .driver-percentage {
            font-size: 0.85rem;
        }
        .driver-progress-bar {
            height: 5px;
        }
        .gatekeep-message {
            font-size: 0.75rem;
            margin-top: 1.25rem;
            padding-top: 0;
        }
        .dominance-label {
            font-size: 1rem !important;
        }
        .quiz-results-description {
            font-size: 1.125rem !important;
            margin-bottom: 1.5rem !important;
            color: #fff !important;
        }
        .quiz-pattern-details {
            margin: 1.5rem 0;
            max-width: 100%;
        }
        .quiz-pattern-section {
            margin-bottom: 1.5rem;
            padding: 1.25rem;
        }
        .quiz-pattern-label {
            font-size: 1rem !important;
            margin-bottom: 0.5rem;
        }
        .quiz-pattern-text {
            font-size: 0.95rem !important;
        }
        .quiz-pattern-cta-text {
            font-size: 1rem !important;
        }
        .quiz-email-capture {
            margin-bottom: 1.5rem;
            margin-top: 0;
        }
        .quiz-email-title {
            font-size: 1.5rem !important;
            margin-bottom: 1.5rem !important;
            margin-top: 0 !important;
            color: #000000 !important;
        }
        .quiz-email-subtitle {
            font-size: 1rem !important;
            margin-bottom: 1rem !important;
            color: #333 !important;
        }
        .quiz-email-form button[type="submit"] {
            padding: 0.9rem 1rem;
            font-size: 1rem;
            letter-spacing: 1.5px;
            width: 100%;
            white-space: normal;
            box-sizing: border-box;
        }
        .quiz-cta-text {
            font-size: 1rem !important;
            margin-bottom: 0.8rem !important;
        }
        .quiz-cta-text:last-of-type {
            margin-bottom: 1.5rem !important;
        }
        .quiz-success-message {
            padding: 2rem 1.5rem !important;
            min-height: 400px !important;
        }
        .quiz-success-title {
            font-size: 1.8rem !important;
            margin-bottom: 0.75rem !important;
            color: #000000 !important;
        }
        .quiz-success-subtitle {
            font-size: 1rem !important;
            margin-bottom: 1.5rem !important;
            color: #fff !important;
        }
        .quiz-success-inbox-note {
            font-size: 1.05rem !important;
            margin-top: 0 !important;
            margin-bottom: 1.5rem !important;
            color: #555 !important;
            line-height: 1.7 !important;
            padding: 0.75rem 1rem !important;
            background: transparent !important;
            border-left: 2px solid rgba(202, 0, 19, 0.3) !important;
            border-radius: 0 !important;
        }
        
        .quiz-success-inbox-note strong {
            color: #ca0013 !important;
            font-weight: 600 !important;
            font-size: 1.05rem !important;
        }
        
        .quiz-success-inbox-note .inbox-icon {
            font-size: 1.1rem !important;
        }
        .quiz-success-pattern-name {
            margin-bottom: 1.5rem !important;
            margin-top: 0 !important;
            border: 2px solid #ca0013 !important;
            border-radius: 8px !important;
            padding: 1.25rem 1.5rem !important;
            display: block !important;
            width: 100% !important;
            max-width: 100% !important;
            background: rgba(202, 0, 19, 0.08) !important;
            box-shadow: 0 2px 6px rgba(202, 0, 19, 0.1) !important;
        }
        .pattern-name-text {
            font-size: 1.5rem !important;
            color: #ca0013 !important;
            display: block !important;
            margin-bottom: 0 !important;
        }
        .pattern-strength-text {
            font-size: 0.8rem !important;
            color: #666 !important;
            display: block !important;
            margin-top: 0.15rem !important;
        }
        .pattern-drivers-preview {
            font-size: 0.8rem !important;
            color: #333 !important;
            margin-top: 0.5rem !important;
            padding-top: 0.5rem !important;
            border-top: 1px solid rgba(202, 0, 19, 0.2) !important;
        }
        .pattern-drivers-preview .driver-label {
            color: #333 !important;
        }
        .pattern-drivers-preview .driver-value {
            color: #ca0013 !important;
        }
        .quiz-success-value-copy {
            font-size: 1rem !important;
            margin-top: 1.25rem !important;
            padding: 0 1rem !important;
            line-height: 1.6 !important;
        }
        .quiz-success-ready {
            font-size: 1.125rem !important;
            margin-bottom: 0.5rem !important;
            color: #000 !important;
        }
        .quiz-success-description {
            font-size: 1rem !important;
            margin-bottom: 2rem !important;
            color: #333 !important;
        }
        .quiz-success-description .desktop-break,
        .quiz-subtitle .desktop-break {
            display: none !important;
        }
        .quiz-success-cta {
            width: 100% !important;
            max-width: 100% !important;
            min-width: auto !important;
            margin-bottom: 0 !important;
        }
        .quiz-success-message {
            padding: 1.5rem 1.5rem !important;
        }
    }

    /* FAQ Section Styles - Matching Course Outline Design */
    .faq-section {
        background: #fffcf1;
        padding: 5rem 0 0 0;
    }

    .faq-section .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 2rem;
    }

    .faq-title {
        font-family: 'Anton', sans-serif;
        color: #000;
        font-size: 3rem;
        font-weight: 700;
        text-transform: uppercase;
        text-align: center;
        letter-spacing: -0.5px;
        margin-bottom: 2.5rem;
        line-height: 1.2;
    }

    .faq-container {
        max-width: 820px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 1.2rem;
    }

    .faq-item {
        border: 1px solid #ca0013;
        border-radius: 16px;
        background: transparent;
        overflow: hidden;
    }

    .faq-question {
        width: 100%;
        background: none;
        border: none;
        outline: none;
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-family: 'Anton', sans-serif;
        color: #ca0013;
        font-size: 1.1rem;
        padding: 1.1rem 1.3rem;
        cursor: pointer;
        transition: background 0.2s;
        text-align: left;
    }

    .faq-question.active {
        background: #fffcf1;
    }

    .faq-question i {
        font-size: 1.3rem;
        color: #ca0013;
        margin-left: 1rem;
        transition: transform 0.3s;
        display: inline-block;
    }

    .faq-question.active i {
        transform: rotate(180deg);
    }

    .faq-answer {
        max-height: 0;
        overflow: hidden;
        background: transparent;
        transition: max-height 0.3s cubic-bezier(0.4,0,0.2,1);
        padding: 0 1.3rem;
    }

    .faq-answer.active {
        max-height: 800px;
        padding-top: 0.5rem;
        padding-bottom: 1.1rem;
    }

    .faq-answer p {
        font-family: 'DM Sans', sans-serif;
        color: #222;
        font-size: 1rem;
        padding: 0.35rem 0;
        margin: 0;
        line-height: 1.6;
    }

    .faq-answer ul {
        margin: 0.5rem 0;
        padding-left: 1.5rem;
    }

    .faq-answer li {
        font-family: 'DM Sans', sans-serif;
        color: #222;
        font-size: 1rem;
        padding: 0.2rem 0;
        margin: 0;
        line-height: 1.6;
    }

    /* Mobile FAQ Styles */
    @media (max-width: 600px) {
        .faq-section {
            padding: 3rem 0;
        }
        .faq-section .container {
            padding: 0 1.25rem;
        }
        .faq-title {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }
        .faq-container {
            max-width: 99vw;
            gap: 0.7rem;
        }
        .faq-question {
            font-size: 1rem;
            padding: 0.85rem 0.9rem;
        }
        .faq-question i {
            font-size: 1.1rem;
            margin-left: 0.7rem;
        }
        .faq-answer {
            padding: 0 0.9rem;
        }
        .faq-answer.active {
            padding-top: 0.3rem;
            padding-bottom: 0.7rem;
            max-height: 300px;
        }
        .faq-answer p,
        .faq-answer li {
            font-size: 0.97rem;
            padding: 0.28rem 0;
        }
    }

    </style>
</head>
<body>
    <!-- Banner hidden - Pattern Reset page is not yet public -->
    <div class="global-reset-banner" style="display: none;">
        <span class="banner-label">Next Reset Starts In:</span>
        <div class="banner-content-row">
            <span class="banner-countdown" id="reset-countdown">--</span>
            <span class="banner-cta">Join the Next Reset <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: inline-block; margin-left: 0.3rem; vertical-align: middle;"><path d="M6 1L11 6L6 11M11 6H1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span>
        </div>
    </div>

    <header>
        <div class="container">
            <nav class="nav-centered">
                <div class="nav-left">
                    <a href="index.html" class="logo-brand-combo" aria-label="Pattern Reset Home">
                        <span class="center-logo nav-logo">
                            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                                <!-- Outer spiral ring -->
                                <path d="M50,5 Q5,5 5,50 Q5,95 50,95 Q95,95 95,50 Q95,5 50,5" 
                                      stroke="currentColor" 
                                      stroke-width="2.5" 
                                      fill="none" 
                                      stroke-linecap="round" 
                                      stroke-linejoin="round"/>
                                <!-- Middle spiral ring -->
                                <path d="M50,20 Q25,20 25,50 Q25,80 50,80 Q75,80 75,50 Q75,20 50,20" 
                                      stroke="currentColor" 
                                      stroke-width="2.5" 
                                      fill="none" 
                                      stroke-linecap="round" 
                                      stroke-linejoin="round"/>
                                <!-- Inner spiral ring -->
                                <path d="M50,35 Q35,35 35,50 Q35,65 50,65 Q65,65 65,50 Q65,35 50,35" 
                                      stroke="currentColor" 
                                      stroke-width="2.5" 
                                      fill="none" 
                                      stroke-linecap="round" 
                                      stroke-linejoin="round"/>
                                <!-- Center point connecting all rings -->
                                <circle cx="50" cy="50" r="3.5" fill="currentColor"/>
                            </svg>
                        </span>
                        <span class="logo-text">My Pattern Quiz</span>
                    </a>
                </div>
                <div class="nav-right">
                    <ul class="nav-links" style="display: none;">
                        <li id="myCourseLink" style="display: none;"><a href="course/breakup-course.html" id="desktopContinueBreakupResetLink">Continue Pattern Reset</a></li>
                    </ul>
                    <a href="#quiz-section" class="nav-cta-button" onclick="event.preventDefault(); const header = document.querySelector('header'); const headerHeight = header ? header.offsetHeight : 0; const section = document.getElementById('quiz-section'); const sectionTop = section.offsetTop; window.scrollTo({top: sectionTop - headerHeight, behavior: 'smooth'}); return false;">Start the Quiz</a>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <section id="home-hero" class="hero">
            <div class="hero-content">
                <div class="hero-text">
                    <h1 class="hero-headline">What's the Pattern Running Your Life?</h1>
                    <p class="hero-subheading">Take the free quiz to discover the emotional loop keeping you stuck—and get your personalized Pattern Reset Workbook to break free.</p>
                    <a href="#quiz-section" class="hero-cta-btn" onclick="event.preventDefault(); const header = document.querySelector('header'); const headerHeight = header ? header.offsetHeight : 0; const section = document.getElementById('quiz-section'); const sectionTop = section.offsetTop; window.scrollTo({top: sectionTop - headerHeight, behavior: 'smooth'}); return false;">Take the Free Quiz</a>
                </div>
                <div class="hero-image">
                    <!-- Image background set via CSS -->
                </div>
            </div>
            <!-- Scrolling Text Loop -->
            <div class="hero-scrolling-text">
                <div class="hero-scrolling-track">
                    <span class="hero-scrolling-item">Discover your pattern</span>
                    <span class="hero-scrolling-item">Know your emotional driver</span>
                    <span class="hero-scrolling-item">See your pattern in action</span>
                    <span class="hero-scrolling-item">Understand why you repeat cycles</span>
                    <span class="hero-scrolling-item">Break your dominant pattern</span>
                    <span class="hero-scrolling-item">Reset your emotional loop</span>
                    <span class="hero-scrolling-item">Connect patterns to your past</span>
                    <span class="hero-scrolling-item">See patterns across life areas</span>
                    <span class="hero-scrolling-item">Get your Pattern Reset Workbook</span>
                    <span class="hero-scrolling-item">Transform your relationships</span>
                    <span class="hero-scrolling-item">Understand your archetype</span>
                    <span class="hero-scrolling-item">Get personalized insights</span>
                    <!-- Duplicate for seamless loop -->
                    <span class="hero-scrolling-item">Discover your pattern</span>
                    <span class="hero-scrolling-item">Know your emotional driver</span>
                    <span class="hero-scrolling-item">See your pattern in action</span>
                    <span class="hero-scrolling-item">Understand why you repeat cycles</span>
                    <span class="hero-scrolling-item">Break your dominant pattern</span>
                    <span class="hero-scrolling-item">Reset your emotional loop</span>
                    <span class="hero-scrolling-item">Connect patterns to your past</span>
                    <span class="hero-scrolling-item">See patterns across life areas</span>
                    <span class="hero-scrolling-item">Get your Pattern Reset Workbook</span>
                    <span class="hero-scrolling-item">Transform your relationships</span>
                    <span class="hero-scrolling-item">Understand your archetype</span>
                    <span class="hero-scrolling-item">Get personalized insights</span>
                </div>
            </div>
            <style>
            /* Hero section background color */
            #home-hero.hero {
                background-color: #252526;
                position: relative;
                min-height: 90vh;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Hero content styling */
            #home-hero .hero-content {
              position: relative;
              z-index: 3;
              width: 100%;
              display: flex;
              align-items: center;
              justify-content: center;
              padding: 6rem 0;
            }
            
            #home-hero .hero-text {
              text-align: center;
              max-width: 900px;
              padding: 0 2rem;
            }
            
            /* Hero headline - using high specificity to override external stylesheet */
            #home-hero .hero-headline,
            #home-hero .hero-text .hero-headline,
            .hero-headline {
              color: #ffffff !important;
              font-family: 'Anton', sans-serif;
              font-size: 3rem !important;
              font-weight: 700 !important;
              text-align: center !important;
              margin-bottom: 1.75rem !important;
              margin-top: 0 !important;
              letter-spacing: 0.2px !important;
              line-height: 1.2 !important;
              text-transform: uppercase !important;
              white-space: nowrap !important;
            }
            
            .hero-headline br {
              display: none;
            }
            
            .hero-subheading {
              color: #ffffff;
              font-family: 'DM Sans', sans-serif;
              font-size: 1.35rem;
              font-weight: 500;
              text-align: center;
              margin-top: 0 !important;
              margin-bottom: 3rem;
              line-height: 1.7;
              max-width: 750px;
              margin-left: auto;
              margin-right: auto;
            }
            
            .hero-cta-btn {
              display: inline-block;
              color: #fffcf1;
              background: #ca0013;
              border: 2px solid #ca0013;
              border-radius: 4px;
              font-family: 'DM Sans', sans-serif;
              font-size: 1.1rem;
              font-weight: 700;
              padding: 1.1rem 2.5rem;
              text-decoration: none;
              text-align: center;
              text-transform: uppercase;
              letter-spacing: 1px;
              transition: background 0.3s, color 0.3s, border-color 0.3s;
              box-shadow: none;
              cursor: pointer;
            }
            
            .hero-cta-btn:hover, .hero-cta-btn:focus {
              background: #b80011;
              color: #fffcf1 !important;
              border-color: #b80011;
              outline: none;
            }
            
            /* Scrolling Text Loop - Wispr Flow Style */
            .hero-scrolling-text {
                position: absolute;
                bottom: 0;
                left: 0;
                width: 100%;
                height: 60px;
                overflow: hidden;
                z-index: 2;
                background: transparent;
                pointer-events: none;
                mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%);
                -webkit-mask-image: linear-gradient(to right, transparent 0%, black 5%, black 95%, transparent 100%);
            }
            
            .hero-scrolling-track {
                display: inline-flex;
                align-items: center;
                white-space: nowrap;
                height: 100%;
                animation: hero-scroll 40s linear infinite;
                will-change: transform;
                width: max-content;
            }
            
            .hero-scrolling-item {
                display: inline-flex;
                align-items: center;
                font-family: 'DM Sans', sans-serif;
                font-size: 0.9rem;
                font-weight: 400;
                color: rgba(255, 255, 255, 0.5);
                margin: 0 3rem;
                white-space: nowrap;
                padding: 0;
                background: transparent;
                border: none;
                transition: color 0.3s ease;
                flex-shrink: 0;
            }
            
            /* All items same greyish color - minimal Wispr Flow style */
            
            @keyframes hero-scroll {
                from {
                    transform: translateX(0);
                }
                to {
                    transform: translateX(-50%);
                }
            }
            
            /* Smooth scroll behavior */
            html {
              scroll-behavior: smooth;
            }
            
            /* Tablet styles */
            @media (max-width: 900px) {
              #home-hero.hero {
                min-height: 85vh;
              }
              
              #home-hero .hero-content {
                padding: 5rem 0;
              }
              
              #home-hero .hero-headline,
              #home-hero .hero-text .hero-headline,
              .hero-headline {
                font-size: 2.5rem !important;
                margin-bottom: 1.75rem !important;
                line-height: 1.2 !important;
                letter-spacing: 0.2px !important;
                text-transform: uppercase !important;
                white-space: normal !important;
                color: #ffffff !important;
              }
              
              .hero-subheading {
                font-size: 1.2rem;
                margin-bottom: 2.5rem;
                padding: 0 1rem;
                line-height: 1.7;
                color: #ffffff;
              }
              
              .hero-cta-btn {
                font-size: 1rem;
                padding: 1rem 2rem;
              }
              
              #home-hero .hero-text {
                padding: 0 1.5rem;
              }
              
              /* Tablet scrolling text adjustments */
              .hero-scrolling-text {
                height: 50px;
              }
              
              .hero-scrolling-item {
                font-size: 0.85rem;
                padding: 0;
                margin: 0 2.5rem;
                color: rgba(255, 255, 255, 0.5);
              }
              
              .hero-scrolling-track {
                animation: hero-scroll 35s linear infinite;
              }
            }
            
            /* Mobile styles */
            @media (max-width: 600px) {
              #home-hero.hero {
                min-height: 80vh;
              }
              
              #home-hero .hero-content {
                padding: 4rem 0 3rem 0;
              }
              
              #home-hero .hero-headline,
              #home-hero .hero-text .hero-headline,
              .hero-headline {
                font-size: 2rem !important;
                margin-bottom: 1.75rem !important;
                line-height: 1.2 !important;
                letter-spacing: 0.5px !important;
                text-transform: uppercase !important;
                white-space: normal !important;
                color: #ffffff !important;
              }
              
              .hero-subheading {
                font-size: 1.1rem;
                margin-bottom: 2.5rem;
                padding: 0;
                line-height: 1.7;
                color: #ffffff;
              }
              
              .hero-cta-btn {
                font-size: 1rem;
                padding: 1rem 2rem;
                width: auto;
                min-width: 220px;
                margin-top: 0;
              }
              
              #home-hero .hero-text {
                padding: 0 1.5rem;
              }
              
              /* Mobile scrolling text adjustments */
              .hero-scrolling-text {
                height: 45px;
              }
              
              .hero-scrolling-item {
                font-size: 0.75rem;
                padding: 0;
                margin: 0 2rem;
                color: rgba(255, 255, 255, 0.5);
              }
              
              .hero-scrolling-track {
                animation: hero-scroll 30s linear infinite;
              }
            }
            
            /* Small mobile styles */
            @media (max-width: 480px) {
              #home-hero .hero-content {
                padding-top: 1.25rem;
                padding-bottom: 0.75rem;
              }
              
              #home-hero .hero-headline,
              #home-hero .hero-text .hero-headline,
              .hero-headline {
                font-size: 2rem !important;
                margin-bottom: 1.25rem !important;
                letter-spacing: 0.3px !important;
                text-transform: uppercase !important;
                white-space: normal !important;
                color: #ffffff !important;
                line-height: 1.2 !important;
              }
              
              .hero-subheading {
                font-size: 1.05rem;
                margin-bottom: 1.5rem;
                padding: 0;
                line-height: 1.6;
                color: #ffffff;
              }
              
              .hero-cta-btn {
                font-size: 0.9rem;
                padding: 0.8rem 1.5rem;
                min-width: 200px;
                margin-top: 0;
              }
              
              #home-hero .hero-text {
                padding: 0 1.25rem;
              }
              
              /* Small mobile scrolling text adjustments */
              .hero-scrolling-text {
                height: 40px;
              }
              
              .hero-scrolling-item {
                font-size: 0.7rem;
                padding: 0;
                margin: 0 1.5rem;
                color: rgba(255, 255, 255, 0.5);
              }
              
              .hero-scrolling-track {
                animation: hero-scroll 25s linear infinite;
              }
            }
            </style>

        </section>

        <!-- Pattern Types Section -->
        <section class="pattern-types-section">
            <div class="pattern-types-container">
                <div class="pattern-types-content">
                    <div class="pattern-types-text">
                        <span class="pattern-types-label">PATTERN TYPES</span>
                        <h2 class="pattern-types-heading">Understand Your Pattern</h2>
                        <p class="pattern-types-description">In our free pattern descriptions, you'll discover how emotional drivers shape behavior and how patterns show up across relationships, work, and life. This knowledge helps you recognize patterns in yourself and others—building deeper understanding and more meaningful connections.</p>
                        <div class="pattern-types-cta">
                            <a href="patterns.html" class="pattern-types-btn">Pattern Types</a>
                            <a href="pattern-theory.html" class="pattern-types-link">How Patterns Work →</a>
                        </div>
                    </div>
                </div>
            </div>
            <style>
                .pattern-types-section {
                    background: #fffcf1;
                    padding: 6rem 0 3rem 0;
                    width: 100vw;
                    position: relative;
                    overflow: hidden;
                }
                
                .pattern-types-container {
                    max-width: 900px;
                    margin: 0 auto;
                    padding: 0 2rem;
                    position: relative;
                    z-index: 2;
                }
                
                .pattern-types-content {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }
                
                .pattern-types-text {
                    display: flex;
                    flex-direction: column;
                    text-align: center;
                    max-width: 700px;
                    margin: 0 auto;
                }
                
                .pattern-types-label {
                    font-family: 'Anton', sans-serif;
                    font-size: 0.75rem;
                    font-weight: 700;
                    letter-spacing: 3px;
                    text-transform: uppercase;
                    color: #ca0013;
                    margin-bottom: 1.5rem;
                    display: block;
                }
                
                .pattern-types-heading {
                    font-family: 'Anton', sans-serif;
                    font-size: 3rem;
                    font-weight: 700;
                    color: #000;
                    margin-bottom: 2rem;
                    line-height: 1.2;
                    text-transform: uppercase;
                    letter-spacing: -0.5px;
                }
                
                .pattern-types-description {
                    font-family: 'DM Sans', sans-serif;
                    font-size: 1.15rem;
                    line-height: 1.8;
                    color: #333;
                    margin-bottom: 3rem;
                }
                
                .pattern-types-cta {
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    gap: 2rem;
                    flex-wrap: wrap;
                    margin-top: 1rem;
                }
                
                .pattern-types-btn {
                    background: #ca0013;
                    color: #fffcf1;
                    padding: 1rem 2.5rem;
                    border-radius: 6px;
                    font-family: 'DM Sans', sans-serif;
                    font-size: 1rem;
                    font-weight: 700;
                    text-decoration: none;
                    text-transform: uppercase;
                    letter-spacing: 1px;
                    transition: all 0.3s ease;
                    display: inline-block;
                }
                
                .pattern-types-btn:hover {
                    background: #b80011;
                    transform: translateY(-2px);
                }
                
                .pattern-types-link {
                    font-family: 'DM Sans', sans-serif;
                    font-size: 1.05rem;
                    font-weight: 600;
                    color: #ca0013;
                    text-decoration: none;
                    transition: color 0.3s ease;
                    display: inline-flex;
                    align-items: center;
                    gap: 0.5rem;
                }
                
                .pattern-types-link:hover {
                    color: #b80011;
                }
                
                @media (max-width: 900px) {
                    .pattern-types-section {
                        padding: 5rem 0;
                    }
                    
                    .pattern-types-heading {
                        font-size: 2.5rem;
                    }
                    
                    .start-here-title {
                        font-size: 2.5rem;
                    }
                    
                    .quiz-title {
                        font-size: 2.5rem;
                    }
                    
                    .faq-title {
                        font-size: 2.5rem;
                    }
                    
                    .pattern-types-description {
                        font-size: 1.1rem;
                    }
                    
                    .pattern-types-cta {
                        gap: 1.5rem;
                    }
                }
                
                @media (max-width: 600px) {
                    .pattern-types-section {
                        padding: 4rem 0 2rem 0;
                    }
                    
                    .pattern-types-container {
                        padding: 0 1.5rem;
                    }
                    
                    .pattern-types-label {
                        font-size: 0.7rem;
                        letter-spacing: 2px;
                        margin-bottom: 1rem;
                    }
                    
                    .pattern-types-heading {
                        font-size: 2rem;
                        margin-bottom: 1.5rem;
                    }
                    
                    .pattern-types-description {
                        font-size: 1rem;
                        line-height: 1.7;
                        margin-bottom: 2.5rem;
                    }
                    
                    .pattern-types-cta {
                        flex-direction: column;
                        align-items: center;
                        gap: 1.25rem;
                        margin-top: 0.5rem;
                    }
                    
                    .pattern-types-btn {
                        width: auto;
                        min-width: 220px;
                        text-align: center;
                        padding: 1rem 2rem;
                        font-size: 1rem;
                    }
                    
                    .pattern-types-link {
                        text-align: center;
                        justify-content: center;
                    }
                }
                
                @media (max-width: 480px) {
                    .pattern-types-btn {
                        font-size: 0.9rem;
                        padding: 0.8rem 1.5rem;
                        min-width: 200px;
                    }
                }
            </style>
        </section>

        <!-- Start Here Section -->
        <section class="start-here-section">
            <div class="start-here-content">
                <h2 class="start-here-title" style="color: #000000; margin-bottom: 1rem;">How It Works</h2>
                <p class="start-here-subtitle" style="color: #000000; font-family: 'DM Sans', sans-serif; font-size: 1.25rem; font-weight: 500; text-align: center; margin-bottom: 3rem; line-height: 1.6;">Find your pattern, and see what's keeping you stuck.</p>
                <style>
                  .mobile-break { display: none; }
                  @media (max-width: 600px) { .mobile-break { display: inline; } }
                  
                  /* Section spacing */
                  .start-here-section {
                    margin-top: 0;
                    padding: 3rem 0 4rem 0;
                  }
                  
                  /* Grid layout for 3 boxes */
                  .start-here-card-grid {
                    display: grid;
                    grid-template-columns: repeat(3, 1fr);
                    gap: 2.5rem;
                    max-width: 1200px;
                    margin: 0 auto;
                    padding: 0 2rem;
                    align-items: stretch;
                  }
                  
                  .start-here-card {
                    background: transparent;
                    border: 1px solid #ca0013;
                    border-radius: 16px;
                    padding: 2.5rem 2rem;
                    text-align: center;
                    transition: transform 0.3s ease, background 0.3s ease;
                    display: flex;
                    flex-direction: column;
                    height: 100%;
                    min-height: 400px;
                    box-sizing: border-box;
                    justify-content: flex-start;
                  }
                  
                  .start-here-card:hover {
                    transform: translateY(-4px);
                    background: rgba(202, 0, 19, 0.05);
                  }
                  
                  .step-number {
                    font-family: 'Anton', sans-serif;
                    font-size: 2.2rem;
                    font-weight: 700;
                    color: #fffcf1;
                    line-height: 1;
                  }
                  
                  .start-here-icon {
                    width: 60px;
                    height: 60px;
                    background: #ca0013;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    margin: 0 auto 1.75rem;
                    flex-shrink: 0;
                  }
                  
                  .start-here-card h3 {
                    font-family: 'Anton', sans-serif;
                    font-size: 1.5rem;
                    font-weight: 700;
                    letter-spacing: 0.5px;
                    text-transform: uppercase;
                    margin-bottom: 1.25rem;
                    text-align: center;
                    color: #000000;
                    line-height: 1.3;
                    min-height: 3.5rem;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                  }
                  
                  .start-here-card p {
                    font-family: 'DM Sans', sans-serif;
                    font-size: 1.125rem;
                    color: #000000;
                    line-height: 1.7;
                    text-align: center;
                    margin: 0 auto;
                    flex-grow: 1;
                    max-width: 100%;
                  }
                  
                  /* Tablet styling */
                  @media (max-width: 900px) {
                    .start-here-section {
                      margin-top: 0.5rem;
                      padding: 4rem 0;
                    }
                    .start-here-title {
                      margin-bottom: 1rem !important;
                    }
                    .start-here-subtitle {
                      font-size: 1.15rem !important;
                      margin-bottom: 3rem !important;
                    }
                    .start-here-card-grid {
                      grid-template-columns: repeat(3, 1fr);
                      gap: 1.75rem;
                      padding: 0 1.5rem;
                    }
                    .start-here-card {
                      padding: 2rem 1.5rem;
                      min-height: 360px;
                    }
                    .start-here-icon {
                      margin: 0 auto 1.5rem;
                    }
                    .start-here-card h3 {
                      font-size: 1.3rem;
                      margin-bottom: 1rem;
                    }
                    .start-here-card p {
                      font-size: 1rem;
                    }
                  }
                  
                  /* Mobile card styling */
                  @media (max-width: 600px) {
                    .start-here-section {
                      margin-top: 0;
                      padding: 2rem 0 3rem 0;
                    }
                    .start-here-title {
                      margin-bottom: 1rem !important;
                    }
                    .start-here-subtitle {
                      font-size: 1.1rem !important;
                      margin-bottom: 2.5rem !important;
                      padding-left: 0 !important;
                      padding-right: 0 !important;
                    }
                    .start-here-card-grid {
                      grid-template-columns: 1fr;
                      gap: 1.5rem;
                      padding: 0 1.25rem;
                      max-width: 520px;
                      width: 100%;
                    }
                    .start-here-card {
                      padding: 2rem 1.5rem;
                      max-width: 100%;
                      width: 100%;
                      min-height: auto;
                    }
                    
                    .start-here-icon {
                      width: 60px;
                      height: 60px;
                      margin: 0 auto 1.5rem;
                    }
                    
                    .start-here-card h3 {
                      font-size: 1.4rem !important;
                      margin-bottom: 1rem;
                    }
                    
                    .start-here-card p {
                      font-size: 1.125rem !important;
                    }
                    
                    .step-number {
                      font-size: 2.2rem;
                    }
                  }
                </style>
                <div class="start-here-card-grid">
                    <!-- Step 1 -->
                    <div class="start-here-card">
                        <div class="start-here-icon" aria-hidden="true">
                          <span class="step-number">1</span>
                        </div>
                        <h3>Take our Free Pattern Quiz</h3>
                        <p>Take our free 15-20 minute quiz to uncover the hidden pattern driving your relationships, choices, and outcomes.</p>
                    </div>
                    <!-- Step 2 -->
                    <div class="start-here-card">
                        <div class="start-here-icon" aria-hidden="true">
                          <span class="step-number">2</span>
                        </div>
                        <h3>See Your Results</h3>
                        <p>Get your pattern name and strength immediately. See how dominant it is and what it means for your life.</p>
                    </div>
                    <!-- Step 3 -->
                    <div class="start-here-card">
                        <div class="start-here-icon" aria-hidden="true">
                          <span class="step-number">3</span>
                        </div>
                        <h3>Unlock Your Full Report</h3>
                        <p>Learn exactly why you repeat cycles and how to break free—get your complete analysis and free Pattern Reset Workbook.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz Section -->
        <section id="quiz-section" class="quiz-section">
            <div class="quiz-container">
                <div class="quiz-intro" id="quiz-intro">
                    <h2 class="quiz-title">Uncover the <span class="quiz-title-highlight">Pattern</span> That's Been Keeping You Stuck</h2>
                    <p class="quiz-subtitle">There's a hidden loop behind your stress, your habits, your relationships,<br> and the choices you keep making. Learn how to break the cycle for good.</p>
                    <p class="quiz-time-indicator">Takes 15-20 minutes • Be honest for accurate results</p>
                    <button type="button" class="btn btn-mission btn-mission-primary" id="start-quiz-btn">Start the Free Quiz</button>
                </div>

                <div class="quiz-content" id="quiz-content" style="display: none;">
                    <div class="quiz-progress">
                        <div class="quiz-progress-bar" id="quiz-progress-bar"></div>
                        <span class="quiz-progress-text" id="quiz-progress-text">0%</span>
                    </div>

                    <div class="quiz-question-container" id="quiz-question-container">
                        <!-- Questions will be dynamically inserted here -->
                    </div>

                    <div class="quiz-navigation">
                        <div class="quiz-navigation-buttons">
                            <button class="btn btn-mission" id="quiz-prev-btn" style="display: none;">Previous</button>
                            <button class="btn btn-mission" id="quiz-next-btn">Next</button>
                        </div>
                        <div class="quiz-error-message" id="quiz-error-message" style="display: none;">Please select an answer before continuing.</div>
                    </div>
                </div>

                <div class="quiz-results" id="quiz-results" style="display: none;">
                    <div class="quiz-results-content">
                        <div id="quiz-results-main">
                            <h3 class="quiz-email-title">Get Your Full Personalized Report</h3>
                            <div class="quiz-email-capture" id="quiz-email-capture">
                                <h2 class="quiz-results-title" id="quiz-results-title"></h2>
                                <p class="quiz-email-subtitle" id="quiz-email-subtitle">Find out what type of <span id="quiz-archetype-dynamic"></span> you are and discover what's keeping you stuck — delivered to your inbox.</p>
                                <form class="quiz-email-form" id="quiz-email-form" action="https://docs.google.com/forms/d/e/1FAIpQLSdMfNDBBsnuE2Q1_Gn57Y_FJmpWTw0h00bTStNd5Bju07mTKA/formResponse" method="POST" target="quiz-hidden-iframe">
                                    <input type="text" id="quiz-name-input" name="entry.XXXXX" placeholder="Your name" required>
                                    <input type="email" id="quiz-email-input" name="entry.649844771" placeholder="Your email" required>
                                    <input type="tel" id="quiz-phone-input" name="entry.XXXXX" placeholder="Your phone number" required>
                                    <input type="hidden" id="quiz-score-hidden" name="entry.673635167">
                                    <input type="hidden" id="quiz-pattern-hidden" name="entry.XXXXX">
                                    <button type="submit" class="btn btn-mission btn-mission-primary">UNLOCK MY PERSONALIZED REPORT</button>
                                </form>
                                <iframe name="quiz-hidden-iframe" style="display:none;"></iframe>
                            </div>
                        </div>

                        <div class="quiz-success-message" id="quiz-success-message" style="display: none;">
                            <h2 class="quiz-success-title">You Unlocked Your Pattern</h2>
                            <p class="quiz-success-pattern-name" id="quiz-success-pattern-name">
                                <span class="pattern-name-text"></span>
                                <span class="pattern-drivers-preview" id="pattern-drivers-preview"></span>
                            </p>
                            <p class="quiz-success-value-copy">
                                See your complete analysis — how your pattern developed, where it impacts every area of your life, and get your personalized Pattern Reset Workbook.
                            </p>
                            <!-- View Full Results Button -->
                            <button onclick="try { if(typeof window.showResultsModal === 'function') { window.showResultsModal(); } else { console.error('showResultsModal not available on window'); alert('Loading full results... Please refresh the page if this doesn\'t work.'); } } catch(e) { console.error('Error opening results modal:', e); alert('Error opening results: ' + e.message); }" class="btn btn-mission btn-mission-primary" style="display: block; margin-top: 1.5rem; margin-bottom: 1rem; margin-left: auto; margin-right: auto; width: auto;">
                                View Full Detailed Report
                            </button>
                            <!-- CTA button hidden - Pattern Reset page is not yet public -->
                            <a href="#" class="btn btn-mission btn-mission-primary quiz-success-cta" id="quiz-success-cta-btn" style="display: none;">
                                <span id="cta-text">Reserve Your Spot</span>
                                <span id="cta-spots" style="display: none;"></span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="faq-section">
            <div class="container">
                <h2 class="faq-title">My Pattern Quiz FAQ</h2>
                <div class="faq-container">
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            What's a Pattern — and why does it matter?
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p><strong>Your pattern is the invisible cycle that runs your life until you reset it.</strong></p>
                            <p>The Pattern is the subconscious loop that drives how you love, think, act, and repeat outcomes. It's the emotional program learned in childhood through reward, rejection, and survival. The automatic response that repeats until it's made conscious.</p>
                            <p>In simple terms: <strong>Your pattern is the invisible habit behind your emotions, relationships, health, and success.</strong></p>
                            <p>It's the root cause behind cycles of self-sabotage, avoidance, overgiving, fear, and control. Until you see it, you can't change it. And until you change it, you'll keep repeating the same outcomes.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            How does my pattern affect my life?
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p>Your pattern shows up in <strong>every area of your life</strong> — and it's running the same unconscious script across all of them:</p>
                            <ul>
                                <li><strong>Love</strong> – who you attract, how you connect, when you pull away</li>
                                <li><strong>Self-worth</strong> – the internal voice that dictates what you think you deserve</li>
                                <li><strong>Habits</strong> – what you repeat when stressed or afraid</li>
                                <li><strong>Money</strong> – how you earn, spend, and self-limit based on safety</li>
                                <li><strong>Health</strong> – how you cope, regulate, and seek comfort</li>
                            </ul>
                            <p>The same pattern that keeps you stuck in relationships is the same one limiting your confidence, sabotaging your goals, and holding you back from the life you want.</p>
                            <p><strong>Breaking it means everything changes together.</strong></p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            How did I get this pattern?
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p>Your pattern formed through early attachment and emotional conditioning. It's the way your nervous system learned to stay safe, even when it keeps you stuck.</p>
                            <p>It was created through:</p>
                            <ul>
                                <li>Repetition of reward or rejection patterns in childhood</li>
                                <li>Nervous-system wiring tied to safety and identity</li>
                                <li>Emotional conditioning that became automatic</li>
                            </ul>
                            <p>And it's reinforced daily through thought loops, emotional avoidance, and unprocessed memory. Every time you react the same way, you're strengthening the pattern.</p>
                            <p><strong>You're not broken. You're repeating a pattern. And it's time to break it.</strong></p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            What is this quiz and what will I learn?
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p><strong>This isn't a game. It's a mirror.</strong></p>
                            <p>The Pattern Reset Quiz is a comprehensive psychological assessment that reveals the emotional code behind your choices. It identifies which unconscious pattern is keeping you stuck — the one shaping every relationship, decision, and outcome.</p>
                            <p>In <strong>15-20 minutes</strong>, you'll answer <strong>46 questions</strong> (44 scored questions + 2 optional questions) across 11 life domains:</p>
                            <ul>
                                <li><strong>Love & Connection</strong> (4 questions) — How you navigate relationships</li>
                                <li><strong>Money & Finances</strong> (4 questions) — Your relationship with money and security</li>
                                <li><strong>Health & Habits</strong> (6 questions) — How you manage stress and self-care</li>
                                <li><strong>Lifestyle & Daily Habits</strong> (4 questions) — Your daily routines and habits</li>
                                <li><strong>Physical Health & Body</strong> (2 questions) — Your relationship with your body</li>
                                <li><strong>Productivity & Time</strong> (3 questions) — How you manage time and productivity</li>
                                <li><strong>Purpose & Flow</strong> (3 questions) — Your sense of purpose and flow states</li>
                                <li><strong>Identity & Self</strong> (4 questions) — How you see yourself and your worth</li>
                                <li><strong>Childhood & Origin</strong> (6 questions) — Where your patterns began</li>
                                <li><strong>Relationship Patterns</strong> (6 questions) — How you connect and protect yourself</li>
                                <li><strong>Reflection</strong> (2 questions) — Your self-awareness and pattern recognition</li>
                            </ul>
                            <p>Plus 2 optional questions: your birth date (for personalized insights) and relationship status (for context).</p>
                            <p>You'll discover your dominant emotional pattern, how it shows up across all areas of your life, and what you need to reset to break free.</p>
                            <p><a href="patterns.html" style="color: #ca0013; font-weight: 600; text-decoration: none;">See all 4 archetypes and 8 patterns →</a></p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            What are all the pattern types?
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p>The Pattern Reset system includes <strong>4 archetypes</strong> and <strong>8 specific patterns</strong>:</p>
                            <p><strong>The Anchor</strong> (Control Driver): The Fixer, The Perfectionist</p>
                            <p><strong>The Catalyst</strong> (Validation Driver): The Pleaser, The Performer</p>
                            <p><strong>The Wanderer</strong> (Avoidance Driver): The Escaper, The Overthinker</p>
                            <p><strong>The Guardian</strong> (Fear of Rejection Driver): The Guarded One, The Overgiver</p>
                            <p><a href="patterns.html" style="color: #ca0013; font-weight: 600; text-decoration: none;">Explore all patterns with descriptions →</a></p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            What do I get after completing the quiz?
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p>You'll receive <strong>immediate, personalized results</strong> — completely free. No email wait time.</p>
                            <p>Your results include:</p>
                            <ul>
                                <li><strong>Your Pattern Identity</strong> — Your archetype (The Anchor, Catalyst, Wanderer, or Guardian) and specific pattern name (e.g., The Fixer, The Pleaser)</li>
                                <li><strong>Pattern Strength</strong> — How dominant your pattern is (percentage) and what it means</li>
                                <li><strong>Emotional Drivers Breakdown</strong> — All 4 emotional drivers (Control, Validation, Avoidance, Fear of Rejection) and how they operate in your life</li>
                                <li><strong>How Everything Connects</strong> — How your pattern shows up across love, money, health, identity, and relationships</li>
                                <li><strong>How It Developed</strong> — Deep psychological insights linking your pattern to childhood experiences</li>
                                <li><strong>Your Pattern Reset Workbook</strong> — A free, self-paced blueprint with daily practices to break your pattern</li>
                            </ul>
                            <p>You can also download your results as PDFs: a Full Report, your Workbook with your answers, and an Affirmation Card to carry your purpose.</p>
                            <p><strong>All results are saved automatically</strong> — return anytime to view or download them again.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            How do I actually break my pattern?
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p>Breaking your pattern requires three steps:</p>
                            <ul>
                                <li><strong>Awareness</strong> – Naming and recognizing your pattern (this quiz gives you that)</li>
                                <li><strong>Interruption</strong> – Creating new actions when your pattern shows up</li>
                                <li><strong>Reset</strong> – Sustaining new identity through daily practice</li>
                            </ul>
                            <p>Your <strong>free Pattern Reset Workbook</strong> (included in your results) provides a self-paced blueprint to break your pattern. It includes:</p>
                            <ul>
                                <li>Pattern-specific interrupt tools to use when your pattern shows up</li>
                                <li>Daily practices based on neuroscience and manifestation principles</li>
                                <li>Identity shifts to create lasting change</li>
                                <li>Journaling prompts to deepen your awareness</li>
                            </ul>
                            <p>Work through your workbook at your own pace. When your pattern shows up, use your interrupt and choose differently. Every practice session builds new neural pathways.</p>
                            <p><strong>When you change the pattern, you change everything — love, confidence, health, and purpose.</strong></p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFAQ(this)">
                            Is the quiz really free?
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="faq-answer">
                            <p><strong>Yes. 100% free.</strong></p>
                            <p>The quiz, your personalized results, Pattern Reset Workbook, and PDF downloads are completely free. No credit card required. No hidden fees.</p>
                            <p>Your results are saved automatically and available anytime — you can view them, download PDFs, and work through your workbook at your own pace, all for free.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer id="footer" style="margin-top: 0.5rem;">
        <div class="footer-content">
            <div class="footer-main">
                <!-- Removed social-links div from here -->
            </div>
            
            <div class="copyright">
                <p>&copy; 2026 Pattern Reset™. All rights reserved. | <a href="legal.html">Legal</a></p>
            </div>            </div>
        </div>
    </footer>

    <div id="signup-popup" class="modal-popup">
        <div class="modal-content">
            <button class="modal-close" aria-label="Close popup" onclick="closePopup()">&times;</button>
            <h3 class="modal-title">Cut Ties. Break Patterns.<br>Begin Again.</h3>
            <p class="modal-subtext">Join thousands breaking free. Get weekly empowerment in your inbox.</p>
            <form class="signup-form popup-form" id="popupSignupForm" action="https://docs.google.com/forms/d/e/1FAIpQLSdMfNDBBsnuE2Q1_Gn57Y_FJmpWTw0h00bTStNd5Bju07mTKA/formResponse" method="POST" target="hidden-iframe">
                <div class="form-group">
                    <input type="email" name="entry.649844771" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <label for="popupNewsletterPhone" class="visually-hidden">Phone number (optional)</label>
                    <input id="popupNewsletterPhone"
                           type="tel"
                           name="entry.673635167"
                           placeholder="Phone"
                           inputmode="tel"
                                                       pattern="[+]?[0-9]{10,15}">
                </div>
                <button type="submit" class="btn-main">I'm Ready</button>
            </form>
            <div id="popup-form-success" class="form-success">Thank you for signing up!</div>
        </div>
    </div>

    <!-- Firebase SDK - Load before firebase.js -->
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
    
    <script src="js/postForm.js?v=2"></script>
    <script src="js/wallFeed.js?v=2"></script>
    <script src="js/utils.js?v=2"></script>
    <script src="js/config/firebase-config.js?v=2"></script>
    <script src="js/firebase.js?v=2"></script>
    <script src="js/components/post-card.js?v=2"></script>
    <script src="js/services/post-service.js?v=2"></script>
    <script src="js/menu.js"></script>
    
    <!-- Quiz Modules - Load before quiz code -->
    <script src="js/quiz/quiz-config.js"></script>
    <script src="js/quiz/quiz-utils.js"></script>
    <script src="js/quiz/quiz-scoring.js"></script>
    <script src="js/quiz/quiz-data.js"></script>
    <script src="js/astrology-utils.js"></script>
    <script src="js/results-renderer.js"></script>
    <script src="js/results-modal.js"></script>
    
    <!-- FAQ Accordion Functionality - Must be available globally before HTML loads -->
    <script>
    // Make toggleFAQ available globally immediately
    window.toggleFAQ = function(button) {
        const faqItem = button.parentElement;
        const answer = faqItem.querySelector('.faq-answer');
        const isActive = button.classList.contains('active');
        
        // Close all other FAQ items
        document.querySelectorAll('.faq-question').forEach(btn => {
            btn.classList.remove('active');
        });
        document.querySelectorAll('.faq-answer').forEach(ans => {
            ans.classList.remove('active');
        });
        
        // Toggle current FAQ item
        if (!isActive) {
            button.classList.add('active');
            answer.classList.add('active');
        }
    };
    </script>
    
    <script>
    // Accordion functionality for results modal
    function toggleAccordion(sectionId) {
        const item = document.querySelector(`[data-section="${sectionId}"]`);
        if (!item) return;
        
        const header = item.querySelector('.accordion-header');
        const content = item.querySelector('.accordion-content');
        const icon = header.querySelector('.accordion-icon');
        
        const isExpanded = item.classList.contains('expanded');
        
        if (isExpanded) {
            item.classList.remove('expanded');
            header.classList.remove('expanded');
            content.classList.remove('expanded');
            icon.style.transform = 'rotate(0deg)';
        } else {
            item.classList.add('expanded');
            header.classList.add('expanded');
            content.classList.add('expanded');
            icon.style.transform = 'rotate(90deg)';
        }
    }
    
    // Make functions globally available
    function toggleDriverDetails(driverId) {
        const item = document.querySelector(`[data-driver-id="${driverId}"]`);
        if (!item) return;
        
        const button = item.querySelector('button');
        const content = item.querySelector('.driver-details-content');
        const icon = button.querySelector('.driver-icon');
        
        const isExpanded = item.classList.contains('expanded');
        
        if (isExpanded) {
            item.classList.remove('expanded');
            content.classList.remove('expanded');
            icon.style.transform = 'rotate(0deg)';
            content.style.maxHeight = '0';
            content.style.paddingTop = '0';
            content.style.paddingBottom = '0';
        } else {
            item.classList.add('expanded');
            content.classList.add('expanded');
            icon.style.transform = 'rotate(90deg)';
            content.style.maxHeight = '500px';
            content.style.paddingTop = '0';
            content.style.paddingBottom = '1.25rem';
        }
    }
    
    window.toggleAccordion = toggleAccordion;
    
    // Toggle Life Area Accordion Item (matching emotional drivers style)
    function toggleLifeArea(areaId) {
        const item = document.querySelector(`[data-area="${areaId}"]`);
        if (!item) return;
        
        const button = item.querySelector('button');
        const content = item.querySelector('.life-area-accordion-content');
        const icon = button.querySelector('.life-area-icon-arrow');
        
        const isExpanded = item.classList.contains('expanded');
        
        if (isExpanded) {
            item.classList.remove('expanded');
            content.classList.remove('expanded');
            if (icon) icon.style.transform = 'rotate(0deg)';
            content.style.maxHeight = '0';
            content.style.paddingTop = '0';
            content.style.paddingBottom = '0';
        } else {
            // Close other expanded items (optional - remove if you want multiple open)
            document.querySelectorAll('.life-area-accordion-item.expanded').forEach(expandedItem => {
                if (expandedItem !== item) {
                    expandedItem.classList.remove('expanded');
                    const expandedContent = expandedItem.querySelector('.life-area-accordion-content');
                    const expandedButton = expandedItem.querySelector('button');
                    const expandedIcon = expandedButton ? expandedButton.querySelector('.life-area-icon-arrow') : null;
                    if (expandedContent) {
                        expandedContent.classList.remove('expanded');
                        expandedContent.style.maxHeight = '0';
                        expandedContent.style.paddingTop = '0';
                        expandedContent.style.paddingBottom = '0';
                    }
                    if (expandedIcon) expandedIcon.style.transform = 'rotate(0deg)';
                }
            });
            
            item.classList.add('expanded');
            content.classList.add('expanded');
            if (icon) icon.style.transform = 'rotate(90deg)';
            content.style.maxHeight = '5000px';
            content.style.paddingTop = '0';
            content.style.paddingBottom = '1.25rem';
        }
    }
    
    window.toggleLifeArea = toggleLifeArea;
    window.toggleDriverDetails = toggleDriverDetails;
    
    // Popup logic
    function closePopup() {
        document.getElementById('signup-popup').style.display = 'none';
        // Set flag in localStorage for 30 days
        var expire = new Date();
        expire.setDate(expire.getDate() + 30);
        localStorage.setItem('hm_popup_closed', expire.getTime());
    }

    function shouldShowPopup() {
        return false; // Popup hidden. To re-enable: use: var closedUntil = localStorage.getItem('hm_popup_closed'); if (!closedUntil) return true; return new Date().getTime() > parseInt(closedUntil);
    }

    // Show popup after page load (disabled when shouldShowPopup returns false)
    window.addEventListener('DOMContentLoaded', function() {
        if (shouldShowPopup()) {
            setTimeout(function() {
                document.getElementById('signup-popup').style.display = 'flex';
            }, 2000); // Show after 2 seconds
        }
    });

    // Popup form submission
    document.getElementById('popupSignupForm').addEventListener('submit', function(e) {
        var form = this;
        var submitButton = form.querySelector('button[type="submit"]');
        submitButton.disabled = true;
        submitButton.textContent = 'Submitting...';
        setTimeout(function() {
            form.reset();
            submitButton.disabled = false;
            submitButton.textContent = "I'm Ready";
            document.getElementById('popup-form-success').style.display = 'block';
            setTimeout(function() {
                document.getElementById('popup-form-success').style.display = 'none';
                closePopup();
            }, 2500);
        }, 1200);
    });

    // Existing footer form logic
    const signupForm = document.getElementById('signupForm');
    if (signupForm) {
        signupForm.addEventListener('submit', function(e) {
            var form = this;
            var submitButton = form.querySelector('button[type="submit"]');
            submitButton.disabled = true;
            submitButton.textContent = 'Submitting...';
            setTimeout(function() {
                form.reset();
                submitButton.disabled = false;
                submitButton.textContent = 'Join Us';
                const formSuccess = document.getElementById('form-success');
                if (formSuccess) {
                    formSuccess.style.display = 'block';
                    setTimeout(function() {
                        formSuccess.style.display = 'none';
                    }, 3000);
                }
            }, 1200);
        });
    }

    function openMenu() {
        document.getElementById('menuOverlay').classList.add('open');
        document.body.style.overflow = 'hidden';
    }

    function closeMenu() {
        document.getElementById('menuOverlay').classList.remove('open');
        document.body.style.overflow = '';
    }

    // Update navigation to show course links when unlocked
    function updateNavigation() {
        const isUnlocked = localStorage.getItem('courseUnlocked_breakup') === 'true';
        const myCourseLink = document.getElementById('myCourseLink');
        const mobileCourseLink = document.getElementById('mobileCourseLink');
        const mobileBreakupResetLink = document.getElementById('mobileBreakupResetLink');
        const desktopBreakupResetLink = document.getElementById('desktopBreakupResetLink');
        const desktopContinueBreakupResetLink = document.getElementById('desktopContinueBreakupResetLink');
        
        if (isUnlocked) {
            if (myCourseLink) myCourseLink.style.display = 'block';
            if (mobileCourseLink) {
                mobileCourseLink.style.display = 'block';
                mobileCourseLink.textContent = 'Continue Pattern Reset';
            }
            if (mobileBreakupResetLink) mobileBreakupResetLink.style.display = 'none';
            if (desktopBreakupResetLink) desktopBreakupResetLink.style.display = 'none';
            if (desktopContinueBreakupResetLink) desktopContinueBreakupResetLink.style.display = 'block';
        } else {
            if (myCourseLink) myCourseLink.style.display = 'none';
            if (mobileCourseLink) mobileCourseLink.style.display = 'none';
            if (mobileBreakupResetLink) mobileBreakupResetLink.style.display = 'block';
            if (desktopBreakupResetLink) desktopBreakupResetLink.style.display = 'block';
            if (desktopContinueBreakupResetLink) desktopContinueBreakupResetLink.style.display = 'none';
        }
    }
    
    // Update navigation on page load
    document.addEventListener('DOMContentLoaded', updateNavigation);
    
    // Hero scroll cue functionality
    document.addEventListener('DOMContentLoaded', function() {
        const scrollCue = document.querySelector('.hero-scroll-cue');
        if (scrollCue) {
            scrollCue.addEventListener('click', function() {
                const missionSection = document.getElementById('mission-section');
                if (missionSection) {
                    // Check if mobile
                    const isMobile = window.innerWidth <= 600;
                    
                    // Get header height for offset
                    const header = document.querySelector('header');
                    const headerHeight = header ? header.offsetHeight : 0;
                    
                    // Calculate scroll position with offset
                    const sectionTop = missionSection.offsetTop;
                    const scrollPosition = sectionTop - headerHeight - 20; // 20px additional padding
                    
                    window.scrollTo({
                        top: scrollPosition,
                        behavior: 'smooth'
                    });
                }
            });
        }
    });

    // Personality Pattern Definitions - New 8 Archetypes
    // Two-Tier Archetype System
    // Tier 1: Mysterious Archetype Categories (4 base archetypes based on dominant driver)
    // Tier 2: Descriptive Pattern Names (8 specific patterns based on driver combinations)
    const archetypeCategories = {
        // Expose to window for modal access
        'control': {
            name: 'The Anchor',
            description: 'Stable, grounded, and structured',
            symbol: '⚓'
        },
        'validation': {
            name: 'The Catalyst',
            description: 'Dynamic, influential, and driven',
            symbol: '⚡'
        },
        'avoidance': {
            name: 'The Wanderer',
            description: 'Free, flowing, and adaptable',
            symbol: '🌊'
        },
        'fear-of-rejection': {
            name: 'The Guardian',
            description: 'Protective, loyal, and resilient',
            symbol: '🛡️'
        }
    };

    const personalityPatterns = {
        'fixer': {
            name: 'Fixer',
            archetypeCategory: 'The Anchor',
            driver: 'control',
            rootEmotion: 'Control',
            coreBelief: 'If I solve it, I\'m safe.',
            strength: 'Responsible & capable',
            shadow: 'Overfunctioning → burnout',
            resetFocus: 'Allow others to own their part',
            identity: 'You take charge and solve problems, believing that if you can fix things, you\'ll stay safe and in control.',
            cta: 'The 22-Day Reset will help you release the need to control everything and allow others to take responsibility for their own lives.',
            complex: {
                primary: 'Savior Complex',
                secondary: 'Control Complex',
                definition: 'A Savior Complex develops when helping others becomes your primary coping mechanism. You learned early that taking care of others made you feel valuable and safe. This complex creates a cycle: you help → you feel needed → you avoid your own pain → you help more.',
                howDeveloped: 'Based on your childhood answers, you likely learned that your worth came from being helpful. Maybe you had to take care of siblings, or a parent needed you, or you learned that helping others was the only way to feel loved and safe.',
                treatmentApproaches: ['Boundary-setting therapy', 'Codependency recovery programs', 'Self-compassion practices', 'Learning to allow others to struggle', 'Internal Family Systems (IFS) therapy', 'Somatic experiencing'],
                recoveryIndicators: ['You can say "no" without guilt', 'Others solve problems without you', 'You prioritize your own needs', 'You feel valuable without helping', 'You allow others to struggle', 'You recognize when help is actually needed vs. when you\'re overfunctioning']
            }
        },
        'perfectionist': {
            name: 'Perfectionist',
            archetypeCategory: 'The Anchor',
            driver: 'control',
            rootEmotion: 'Control',
            coreBelief: 'If I do it right, I\'ll be loved.',
            strength: 'Disciplined & driven',
            shadow: 'Shame & rigidity',
            resetFocus: 'Self-acceptance & rest',
            identity: 'You strive for excellence, believing that doing things perfectly will earn you love and acceptance.',
            cta: 'The 22-Day Reset will help you embrace self-acceptance, release shame, and find rest without perfection.',
            complex: {
                primary: 'Perfectionism Complex',
                secondary: 'Imposter Syndrome',
                definition: 'A Perfectionism Complex develops when you believe that being perfect will protect you from criticism, rejection, or failure. You learned that mistakes were dangerous, so you strive for flawlessness as a survival strategy.',
                howDeveloped: 'Based on your childhood answers, you likely learned that mistakes led to criticism, rejection, or punishment. Maybe you had to be perfect to earn love, or you learned that "good enough" wasn\'t safe.',
                treatmentApproaches: ['Cognitive Behavioral Therapy (CBT)', 'Self-compassion practices', 'Exposure therapy (allowing imperfection)', 'Mindfulness-based stress reduction', 'Acceptance and Commitment Therapy (ACT)', 'Shame resilience work'],
                recoveryIndicators: ['You can make mistakes without self-criticism', 'You complete tasks at "good enough"', 'You rest without guilt', 'You accept feedback without defensiveness', 'You try new things despite fear of failure', 'You recognize perfectionism as a pattern, not a strength']
            }
        },
        'escaper': {
            name: 'Escaper',
            archetypeCategory: 'The Wanderer',
            driver: 'avoidance',
            rootEmotion: 'Avoidance',
            coreBelief: 'If I don\'t feel it, it can\'t hurt me.',
            strength: 'Free & creative',
            shadow: 'Disconnection',
            resetFocus: 'Face emotions without fleeing',
            identity: 'You avoid difficult feelings and situations, using freedom and spontaneity as protection from pain.',
            cta: 'The 22-Day Reset will help you face your emotions without fleeing and build deeper connections.',
            complex: {
                primary: 'Avoidance Complex',
                secondary: 'Emotional Numbing Complex',
                definition: 'An Avoidance Complex develops when you learn that feeling difficult emotions is dangerous. You use distraction, busyness, or freedom to avoid pain, but this creates disconnection from yourself and others.',
                howDeveloped: 'Based on your childhood answers, you likely learned that difficult emotions were overwhelming, unsafe, or led to rejection. Maybe you had to stay "positive" or "strong," or you learned that feeling deeply was dangerous.',
                treatmentApproaches: ['Somatic experiencing', 'Emotion regulation therapy', 'Mindfulness practices', 'Trauma-informed therapy', 'Dialectical Behavior Therapy (DBT)', 'Gradual exposure to emotions'],
                recoveryIndicators: ['You can sit with difficult emotions', 'You don\'t immediately distract when feeling pain', 'You allow yourself to feel fully', 'You build deeper connections', 'You recognize avoidance as a pattern', 'You face conflicts instead of fleeing']
            }
        },
        'overthinker': {
            name: 'Overthinker',
            archetypeCategory: 'The Wanderer',
            driver: 'avoidance',
            rootEmotion: 'Avoidance',
            coreBelief: 'If I analyze enough, I\'ll feel safe.',
            strength: 'Insightful & intelligent',
            shadow: 'Paralysis & anxiety',
            resetFocus: 'Act before over-analyzing',
            identity: 'You analyze everything deeply, believing that understanding will protect you from uncertainty and pain.',
            cta: 'The 22-Day Reset will help you move from analysis to action and break free from paralysis.',
            complex: {
                primary: 'Analysis Paralysis Complex',
                secondary: 'Intellectualization Complex',
                definition: 'An Analysis Paralysis Complex develops when you use thinking as a way to avoid feeling or acting. You believe that if you think through everything perfectly, you\'ll avoid mistakes, but this creates paralysis and anxiety.',
                howDeveloped: 'Based on your childhood answers, you likely learned that acting without thinking was dangerous. Maybe you had to analyze every situation to stay safe, or you learned that understanding was more valuable than feeling.',
                treatmentApproaches: ['Cognitive Behavioral Therapy (CBT)', 'Action-based therapy', 'Mindfulness practices', 'Somatic experiencing', 'Exposure therapy (acting despite uncertainty)', 'Acceptance and Commitment Therapy (ACT)'],
                recoveryIndicators: ['You can make decisions without overthinking', 'You act despite uncertainty', 'You recognize when thinking is avoidance', 'You feel emotions instead of analyzing them', 'You take action before having all the answers', 'You accept "good enough" decisions']
            }
        },
        'pleaser': {
            name: 'Pleaser',
            archetypeCategory: 'The Catalyst',
            driver: 'validation',
            rootEmotion: 'Validation',
            coreBelief: 'If they\'re happy, I\'m okay.',
            strength: 'Empathetic & kind',
            shadow: 'People-pleasing → resentment',
            resetFocus: 'Honesty & boundaries',
            identity: 'You prioritize others\' happiness, believing that keeping people happy will keep you safe and loved.',
            cta: 'The 22-Day Reset will help you set boundaries, speak your truth, and release the need to please everyone.',
            complex: {
                primary: 'Codependency Complex',
                secondary: 'People-Pleasing Complex',
                definition: 'A Codependency Complex develops when you lose yourself in relationships, prioritizing others\' needs over your own. You believe that keeping others happy will keep you safe, but this leads to resentment and losing your identity.',
                howDeveloped: 'Based on your childhood answers, you likely learned that your needs didn\'t matter or that keeping others happy was the only way to feel safe. Maybe you had to manage a parent\'s emotions, or you learned that saying "no" led to rejection.',
                treatmentApproaches: ['Codependency recovery programs', 'Boundary-setting therapy', 'Internal Family Systems (IFS)', 'Assertiveness training', 'Self-compassion practices', 'Trauma-informed therapy'],
                recoveryIndicators: ['You can say "no" without guilt', 'You prioritize your own needs', 'You speak your truth even when it\'s uncomfortable', 'You set boundaries without feeling selfish', 'You recognize when you\'re people-pleasing', 'You feel valuable without others\' approval']
            }
        },
        'performer': {
            name: 'Performer',
            archetypeCategory: 'The Catalyst',
            driver: 'validation',
            rootEmotion: 'Validation',
            coreBelief: 'If I impress, I belong.',
            strength: 'Charismatic & motivated',
            shadow: 'Burnout & emptiness',
            resetFocus: 'Authenticity over image',
            identity: 'You work hard to impress and achieve, believing that success and recognition will make you belong.',
            cta: 'The 22-Day Reset will help you find authenticity beyond performance and connect with your true self.',
            complex: {
                primary: 'Achievement Complex',
                secondary: 'Imposter Syndrome',
                definition: 'An Achievement Complex develops when your worth becomes tied to success and recognition. You work constantly to prove your value, believing that achievement will make you belong, but this leads to burnout and emptiness.',
                howDeveloped: 'Based on your childhood answers, you likely learned that love and acceptance were conditional on achievement. Maybe you had to perform to earn attention, or you learned that being "good enough" required constant success.',
                treatmentApproaches: ['Identity work therapy', 'Self-compassion practices', 'Values clarification', 'Mindfulness-based stress reduction', 'Internal Family Systems (IFS)', 'Authenticity-focused therapy'],
                recoveryIndicators: ['You can rest without guilt', 'You feel valuable without achievement', 'You show up authentically, not just impressively', 'You recognize when you\'re performing', 'You connect with others beyond success', 'You define worth beyond external validation']
            }
        },
        'guarded-one': {
            name: 'Withdrawer',
            archetypeCategory: 'The Guardian',
            driver: 'fear-of-rejection',
            rootEmotion: 'Fear of Rejection',
            coreBelief: 'If I don\'t open up, I won\'t get hurt.',
            strength: 'Independent',
            shadow: 'Isolation & loneliness',
            resetFocus: 'Emotional vulnerability',
            identity: 'You protect yourself by staying independent and closed off, believing that not opening up will prevent rejection.',
            cta: 'The 22-Day Reset will help you safely open up, practice vulnerability, and build genuine connections.',
            complex: {
                primary: 'Emotional Unavailability Complex',
                secondary: 'Avoidant Attachment Pattern',
                definition: 'An Emotional Unavailability Complex develops when you protect yourself through distance and independence. You learned that opening up led to rejection or hurt, so you stay closed off, but this creates isolation and loneliness.',
                howDeveloped: 'Based on your childhood answers, you likely learned that vulnerability was dangerous. Maybe you were rejected when you opened up, or you learned that independence was safer than connection.',
                treatmentApproaches: ['Attachment-based therapy', 'Trauma-informed therapy', 'Gradual exposure to vulnerability', 'Internal Family Systems (IFS)', 'Somatic experiencing', 'Group therapy for connection'],
                recoveryIndicators: ['You can open up without fear', 'You allow others to see the real you', 'You build deeper connections', 'You recognize withdrawal as protection', 'You practice vulnerability safely', 'You feel safe in connection']
            }
        },
        'overgiver': {
            name: 'Overgiver',
            archetypeCategory: 'The Guardian',
            driver: 'fear-of-rejection',
            rootEmotion: 'Fear of Rejection',
            coreBelief: 'If I give more, they won\'t leave.',
            strength: 'Loyal & generous',
            shadow: 'Self-neglect',
            resetFocus: 'Balance & self-worth',
            identity: 'You give endlessly to others, believing that giving more will prevent abandonment and rejection.',
            cta: 'The 22-Day Reset will help you balance giving with receiving and recognize your own worth.',
            complex: {
                primary: 'Martyr Complex',
                secondary: 'Self-Sacrifice Complex',
                definition: 'A Martyr Complex develops when you give endlessly to earn love and prevent abandonment. You believe that giving more will make you valuable and keep others from leaving, but this leads to self-neglect and resentment.',
                howDeveloped: 'Based on your childhood answers, you likely learned that love was conditional on giving. Maybe you had to give to earn attention, or you learned that your needs didn\'t matter compared to others\'.',
                treatmentApproaches: ['Self-worth therapy', 'Boundary-setting therapy', 'Self-compassion practices', 'Internal Family Systems (IFS)', 'Reciprocity work', 'Learning to receive'],
                recoveryIndicators: ['You can receive without guilt', 'You give from abundance, not fear', 'You recognize your own needs matter', 'You set limits on giving', 'You feel valuable without overgiving', 'You allow others to give to you']
            }
        }
    };

    // ========================================
    // QUIZ CONFIGURATION
    // ========================================
    // QUIZ_CONFIG is now loaded from js/quiz/quiz-config.js
    // If module didn't load, provide fallback
    if (typeof window.QUIZ_CONFIG === 'undefined') {
        console.error('QUIZ_CONFIG module not loaded! Using fallback.');
        window.QUIZ_CONFIG = {
            TOTAL_SCORED_QUESTIONS: 47,
            TOTAL_QUESTIONS: 49,
            BIRTH_DATE_QUESTION_INDEX: 47,
            RELATIONSHIP_STATUS_QUESTION_INDEX: 48,
            POINTS_PER_ANSWER: 3,
            MAX_SCORE: 141,
            DOMINANCE_THRESHOLDS: { STRONG: 70, MODERATE: 50, BALANCED: 40, MIXED: 0 },
            SECONDARY_PATTERN_THRESHOLD: 25,
            STORAGE_KEY: 'patternResetQuizState',
            QUESTION_DOMAINS: {
                LOVE: { start: 0, end: 3 },
                MONEY: { start: 4, end: 7 },
                HEALTH: { start: 8, end: 13 },
                LIFESTYLE: { start: 14, end: 17 },
                PHYSICAL: { start: 18, end: 19 },
                PRODUCTIVITY: { start: 20, end: 22 },
                PURPOSE: { start: 23, end: 25 },
                IDENTITY: { start: 26, end: 29 },
                CHILDHOOD: { start: 30, end: 35 },
                TRAUMA: { start: 36, end: 38 },
                RELATIONSHIPS: { start: 39, end: 44 },
                REFLECTION: { start: 45, end: 46 }
            }
        };
    }
    
    // Use QUIZ_CONFIG from window (loaded from module)
    // Create a safe reference to avoid redeclaration errors
    const QUIZ_CONFIG_REF = window.QUIZ_CONFIG || {};
    if (!window.QUIZ_CONFIG) {
        console.error('QUIZ_CONFIG not available!');
    }
    
    // ========================================
    // QUIZ DATA
    // ========================================
    // Quiz Functionality - 47 Question System (+ 1 Birth Date + 1 Relationship Status)
    // Questions organized by life areas: Love (4), Money (4), Health (6), Lifestyle (4), Physical (2), Productivity (3), Purpose (3), Identity (4), Childhood (6), Trauma (3), Relationships (6), Reflection (2), Birth Date (1), Relationship Status (1)
    // Total: 47 scored questions + 1 birth date + 1 relationship status = 49 questions
    const quizData = [
        // Love & Connection (Questions 1-4)
        {
            question: "When someone I care about pulls away, my first move is to:",
            domain: 'LOVE',
            options: [
                { text: "Step in and try to fix what went wrong.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Act casual and avoid the heavy talk.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Do more to win them back.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Emotionally withdraw to protect myself.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "I feel safest in relationships when:",
            domain: 'LOVE',
            options: [
                { text: "I can set the pace and keep things on track.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Nothing feels too serious or intense.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "I am reassured and appreciated.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "I keep some distance until I trust fully.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "During conflict, I usually:",
            domain: 'LOVE',
            options: [
                { text: "Take charge and resolve it quickly.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Step away or distract myself.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Apologize or smooth things over fast.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Emotionally withdraw and go quiet.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When love feels uncertain, I tend to:",
            domain: 'LOVE',
            options: [
                { text: "Plan and try to control the outcome.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Change the subject or avoid the talk.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Please more to feel wanted.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Pull back so I cannot be hurt.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Money & Security (Questions 5-8)
        {
            question: "My relationship with money often feels:",
            domain: 'MONEY',
            options: [
                { text: "Safe only when I am fully in control.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Stressful, so I avoid thinking about it.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Tied to my value and success.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Uncertain, and I fear losing it.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When a money problem hits, I:",
            domain: 'MONEY',
            options: [
                { text: "Go into fix mode with plans and tasks.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Delay and hope it feels easier later.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Feel like I failed or let people down.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Freeze and worry about worst cases.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "Success to me mostly means:",
            domain: 'MONEY',
            options: [
                { text: "Stability and control over my life.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Freedom and flexible choices.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Being respected and recognized.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Feeling safe and secure with a cushion.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When my income changes, I usually:",
            domain: 'MONEY',
            options: [
                { text: "Rework the plan and tighten systems.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Avoid looking closely for a while.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Link it to how worthy I am.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Worry and become guarded with spending.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Health & Habits (Questions 9-14)
        {
            question: "When I feel overwhelmed, I usually:",
            domain: 'HEALTH',
            options: [
                { text: "Make a clear plan and structure my day.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Numb out or distract myself.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Look for praise or support to keep going.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Pull back from others and keep to myself.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "I stay consistent with routines when:",
            domain: 'HEALTH',
            options: [
                { text: "I control the schedule and rules.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "I feel inspired or in the mood.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Someone notices and cheers me on.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "I feel safe and emotionally held.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When it comes to your physical health, what's your biggest struggle?",
            domain: 'HEALTH',
            options: [
                { text: "Struggling to lose weight despite strict dieting and over-exercising.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Lack of energy, feeling sluggish, or dealing with chronic fatigue.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Inconsistent motivation - I start strong but lose momentum when results don't come fast.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Body image issues and feeling disconnected from my body.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When I break a health or habit commitment, I typically:",
            domain: 'HEALTH',
            options: [
                { text: "Get stricter and create even more rigid rules to make up for it.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Tell myself I'll restart 'tomorrow' or 'next week' and keep delaying.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Feel guilty and seek someone to hold me accountable or cheer me on.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Give up completely and isolate, feeling like I've failed again.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When I try to build a new habit, I usually:",
            domain: 'HEALTH',
            options: [
                { text: "Create a detailed system and stick to it rigidly, even if it's unsustainable.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Start strong but lose momentum when it gets difficult or boring.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Need external accountability, support, or recognition to stay consistent.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Quit early because I feel like I'm already failing or not good enough.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When I'm stressed or emotional, I tend to:",
            domain: 'HEALTH',
            options: [
                { text: "Take control and create a plan to manage everything systematically.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Eat junk food, overeat, scroll social media, shop, or use substances to numb out.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Seek validation or support from others to feel better and keep going.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Withdraw and isolate myself, feeling like I shouldn't burden others.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Lifestyle & Daily Habits (Questions 15-18)
        {
            question: "My relationship with food is:",
            domain: 'LIFESTYLE',
            options: [
                { text: "Rigid and controlled - I follow strict rules and feel guilty when I break them.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Emotional and chaotic - I eat to numb feelings, then feel shame about it.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Tied to my self-worth - I feel good about myself when I eat 'right' and bad when I don't.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Disconnected - I often forget to eat or eat mindlessly, feeling disconnected from my body.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "My sleep patterns are:",
            domain: 'LIFESTYLE',
            options: [
                { text: "Rigid and scheduled - I stick to a strict bedtime routine, even when stressed.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Inconsistent - I stay up late scrolling or watching TV to avoid quiet thoughts.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Tied to my productivity - I feel guilty if I sleep too much or not enough.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Disrupted by worry - I lie awake worrying about being rejected or abandoned.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "My daily routine is:",
            domain: 'LIFESTYLE',
            options: [
                { text: "Highly structured and planned - I follow a strict schedule and feel off if it's disrupted.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Inconsistent and mood-dependent - I do things when I feel like it, not on a schedule.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Driven by external expectations - I structure my day around what others need or expect.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Minimal and isolated - I keep my routine simple to avoid depending on others.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When it comes to movement and exercise:",
            domain: 'LIFESTYLE',
            options: [
                { text: "I follow a strict workout plan and feel guilty if I miss a day.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "I start strong but lose momentum when it gets hard or boring.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "I need a workout buddy or class to stay motivated and accountable.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "I avoid it because I feel self-conscious or disconnected from my body.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Physical Health & Body (Questions 19-20)
        {
            question: "My relationship with my body is:",
            domain: 'PHYSICAL',
            options: [
                { text: "Critical and controlling - I'm constantly trying to fix or improve it.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Disconnected - I avoid thinking about it or looking at it closely.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Tied to my worth - I feel good about myself when my body looks 'right' to others.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Shameful - I feel like my body isn't good enough and hide it from others.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "My energy levels throughout the day are:",
            domain: 'PHYSICAL',
            options: [
                { text: "Consistent but drained - I push through even when exhausted.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Unpredictable - I have bursts of energy then crash, often feeling sluggish.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Tied to external validation - I have more energy when others notice or praise me.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Low and depleted - I often feel drained, especially after social interactions.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Productivity & Time (Questions 21-23)
        {
            question: "My relationship with time is:",
            domain: 'PRODUCTIVITY',
            options: [
                { text: "Rigid and scheduled - I plan every hour and feel stressed when things don't go as planned.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Chaotic and avoidant - I lose track of time or procrastinate on important tasks.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Driven by others' needs - I fill my time helping others and neglect my own priorities.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Isolated and minimal - I keep my schedule empty to avoid depending on others.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When I procrastinate, it's usually because:",
            domain: 'PRODUCTIVITY',
            options: [
                { text: "I'm overthinking and trying to plan everything perfectly before starting.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "The task feels overwhelming or boring, so I avoid it and distract myself.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "I'm waiting for motivation or someone to hold me accountable.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "I fear I'll fail or be judged, so I delay starting.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "My biggest productivity blocker is:",
            domain: 'PRODUCTIVITY',
            options: [
                { text: "Over-planning and perfectionism - I spend more time planning than doing.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Avoiding difficult or uncomfortable tasks - I distract myself instead.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Needing external validation - I lose momentum when no one notices my progress.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Fear of failure or judgment - I hold back because I don't want to be rejected.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Purpose & Flow (Questions 24-26)
        {
            question: "I feel most alive and in flow when I'm:",
            domain: 'PURPOSE',
            options: [
                { text: "Leading a project or creating a structured system that works perfectly.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Completely free and spontaneous, with no pressure or expectations.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Being recognized or appreciated for my work and contributions.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Alone and fully immersed in something that makes me feel safe.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "My relationship with my goals and purpose is:",
            domain: 'PURPOSE',
            options: [
                { text: "Rigid and planned - I have detailed goals and feel off-track if I deviate.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Unclear and avoidant - I keep my options open and avoid committing to one path.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Tied to others' approval - I pursue goals that will make others proud of me.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Fearful and hidden - I have dreams but don't pursue them for fear of rejection.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "The hardest part about finding my purpose is:",
            domain: 'PURPOSE',
            options: [
                { text: "Trying to plan and control it perfectly before I start.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Facing the discomfort and uncertainty of committing to one path.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Not knowing if others will validate or recognize my purpose.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Fear that I'm not good enough or that I'll be rejected for pursuing it.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Identity & Self (Questions 27-30)
        {
            question: "When I think about my direction in life, I:",
            domain: 'IDENTITY',
            options: [
                { text: "Plan deeply and try to control outcomes.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Switch paths or keep it open.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Focus on how others will see me.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Doubt if I truly belong anywhere.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "My biggest fear about failing is:",
            domain: 'IDENTITY',
            options: [
                { text: "Losing control of what happens next.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Having to face hard feelings.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Disappointing people who believed in me.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Being rejected or left behind.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "I feel most like myself when:",
            domain: 'IDENTITY',
            options: [
                { text: "I am leading and creating structure.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "I am free and spontaneous.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "I am appreciated and seen.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "I am understood at a deep level.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When I think about changing who I am, I feel:",
            domain: 'IDENTITY',
            options: [
                { text: "Anxious about losing control of my identity and what I've built.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Resistant - I avoid thinking about it because change feels uncomfortable.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Worried about what others will think if I change.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Afraid that changing means I wasn't good enough as I was.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Childhood & Origin (Questions 31-36)
        {
            question: "Growing up, when I was upset or emotional, my parents usually:",
            domain: 'CHILDHOOD',
            options: [
                { text: "Took charge and tried to fix or solve it for me.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Avoided talking about it or changed the subject.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Reassured me and made me feel better.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Withdrew or seemed uncomfortable with my emotions.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "As a child, I felt safest when:",
            domain: 'CHILDHOOD',
            options: [
                { text: "I was in control of my environment and knew what to expect.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "I could escape or avoid difficult situations.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "I was praised, appreciated, or recognized by others.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "I was alone or didn't have to depend on anyone.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "In my family growing up, emotions were typically:",
            domain: 'CHILDHOOD',
            options: [
                { text: "Managed and controlled — we kept things structured.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Avoided or ignored — we didn't talk about feelings much.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Validated and celebrated — feelings were acknowledged positively.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Unpredictable or unsafe — I learned to hide my emotions.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "As a child, I learned that to feel safe and loved, I needed to:",
            domain: 'CHILDHOOD',
            options: [
                { text: "Be responsible, capable, and solve problems.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Stay free, avoid conflict, and not make waves.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Please others, be helpful, and make people happy.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Stay independent and not rely on others too much.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When I needed something as a child (comfort, help, attention), my parents usually:",
            domain: 'CHILDHOOD',
            options: [
                { text: "Provided it but only if I handled things correctly first.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Were inconsistent — sometimes there, sometimes not.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Provided it warmly and made me feel valued.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Were unavailable or made me feel like a burden.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "My earliest memories of relationships with caregivers involve feeling:",
            domain: 'CHILDHOOD',
            options: [
                { text: "Like I had to be the responsible one or take charge.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Like I needed to escape or avoid getting too close.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Like I needed to earn love through being good or helpful.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Like I couldn't fully trust or depend on others.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Trauma & Adversity (Questions 37-39) - Understanding what shaped your patterns
        {
            question: "Growing up, did you experience significant challenges, difficult situations, or adversity that shaped how you learned to cope?",
            domain: 'TRAUMA',
            options: [
                { text: "Yes, I had to take care of others or be responsible for things beyond my age.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Yes, I learned to escape or avoid difficult situations to protect myself.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Yes, I learned that I had to earn love or approval through achievement or being helpful.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Yes, I experienced abandonment, rejection, or learned I couldn't depend on others.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When you think about what shaped your patterns, what feels most true?",
            domain: 'TRAUMA',
            options: [
                { text: "I had to be in control because things were chaotic or unpredictable.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "I learned to avoid difficult feelings because they were too overwhelming or unsafe.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "I learned that my worth came from what I achieved or how much I helped others.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "I learned that opening up or depending on others led to hurt or abandonment.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "The most significant challenge or adversity you faced growing up was:",
            domain: 'TRAUMA',
            options: [
                { text: "Having to be responsible for others or manage situations beyond my control.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Feeling overwhelmed by emotions or situations I couldn't escape from.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Feeling like I had to prove my worth or earn love through achievement.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Experiencing rejection, abandonment, or learning I couldn't trust others.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Relationship Patterns (Questions 40-45)
        {
            question: "When someone gets too close or wants deeper intimacy, I usually:",
            domain: 'RELATIONSHIPS',
            options: [
                { text: "Take control and set boundaries to manage the pace.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Pull away or create distance to avoid getting too close.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Try harder to be what they want so they don't leave.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Shut down emotionally or push them away to protect myself.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When a relationship starts getting serious or committed, I tend to:",
            domain: 'RELATIONSHIPS',
            options: [
                { text: "Plan and control how the relationship progresses.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Feel trapped and want to escape or keep options open.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Work harder to prove I'm worthy of commitment.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Fear they'll see the real me and reject me.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "My relationships typically end because:",
            domain: 'RELATIONSHIPS',
            options: [
                { text: "I try to control or fix things too much and it becomes too much.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "I avoid difficult conversations until it's too late.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "I lose myself trying to please them and they lose interest.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "I push them away before they can reject me.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "The hardest part of being in a relationship for me is:",
            domain: 'RELATIONSHIPS',
            options: [
                { text: "Letting go of control and trusting the process.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Having to face difficult emotions or conversations.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Feeling like I'm not enough or will disappoint them.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Opening up and being vulnerable without fear of rejection.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "I'm typically drawn to partners who:",
            domain: 'RELATIONSHIPS',
            options: [
                { text: "Need fixing or managing, so I can be in control.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Keep things casual and don't want too much commitment.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Make me feel needed, valued, or appreciated.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Are emotionally unavailable, so I don't have to risk rejection.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "When I feel lonely or want connection, I usually:",
            domain: 'RELATIONSHIPS',
            options: [
                { text: "Take charge and create opportunities to connect on my terms.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Distract myself or avoid thinking about it.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "Seek validation or approval from others to feel less alone.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Isolate myself because reaching out feels too risky.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Reflection (Questions 46-47)
        {
            question: "The hardest thing for me to let go of right now is:",
            domain: 'REFLECTION',
            options: [
                { text: "Control of people or outcomes.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "Discomfort I keep avoiding.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "The need for approval.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Fear of being rejected.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        {
            question: "Right now, my sense of self-worth and ability to change depends on:",
            domain: 'REFLECTION',
            options: [
                { text: "How well I manage, perform, and control my life.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'control' },
                { text: "How easy and pressure-free life feels - I avoid change because it's uncomfortable.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'avoidance' },
                { text: "How much others value, praise, or validate me - I need their approval to believe I can change.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'validation' },
                { text: "Whether I feel fully accepted - I fear I'm not good enough to change or transform.", score: QUIZ_CONFIG_REF.POINTS_PER_ANSWER || 3, driver: 'fear-of-rejection' }
            ]
        },
        // Birth Date (Question 48 / Index 47) - Special handling, not scored
        {
            question: "What is your birth date?",
            questionType: 'birthdate',
            options: [] // Will be handled as text input
        },
        // Relationship Status (Question 49 / Index 48) - Special handling, not scored, optional
        {
            question: "What is your current relationship status?",
            questionType: 'relationship-status',
            options: [
                { text: "Single", value: "single" },
                { text: "Dating / Casually seeing someone", value: "dating" },
                { text: "In a committed relationship", value: "committed" },
                { text: "Married", value: "married" },
                { text: "Divorced / Separated", value: "divorced" },
                { text: "Prefer not to say", value: "prefer-not-to-say" }
            ]
        }
    ];

    // Expose quiz data to window for modal access
    window.personalityPatterns = personalityPatterns;
    window.archetypeCategories = archetypeCategories;
    window.quizData = quizData; // Expose quiz data for results story

    let currentQuestion = 0;
    let answers = [];
    let totalScore = 0;
    let quizCompleted = false;
    let formSubmitted = false;
    let birthDate = null; // Store birth date for personalization
    let relationshipStatus = null; // Store relationship status for personalization
    let driverScores = {
        'control': 0,
        'avoidance': 0,
        'validation': 0,
        'fear-of-rejection': 0
    };

    // Save quiz state to localStorage
    function saveQuizState() {
        const quizState = {
            currentQuestion: currentQuestion,
            answers: answers,
            totalScore: totalScore,
            quizCompleted: quizCompleted,
            formSubmitted: formSubmitted,
            birthDate: birthDate,
            relationshipStatus: relationshipStatus,
            driverScores: driverScores,
            patternKey: window.quizPatternKey || null, // Store pattern key for results page
            userName: window.quizUserName || null // Store user name for results page
        };
        localStorage.setItem(QUIZ_CONFIG_REF.STORAGE_KEY, JSON.stringify(quizState));
    }

    // Load quiz state from localStorage
    function loadQuizState() {
        const savedState = localStorage.getItem(QUIZ_CONFIG_REF.STORAGE_KEY);
        if (savedState) {
            try {
                const state = JSON.parse(savedState);
                currentQuestion = state.currentQuestion || 0;
                answers = state.answers || [];
                totalScore = state.totalScore || 0;
                quizCompleted = state.quizCompleted || false;
                formSubmitted = state.formSubmitted || false;
                birthDate = state.birthDate || null;
                relationshipStatus = state.relationshipStatus || null;
                driverScores = state.driverScores || {
                    'control': 0,
                    'avoidance': 0,
                    'validation': 0,
                    'fear-of-rejection': 0
                };
                if (state.patternKey) {
                    window.quizPatternKey = state.patternKey; // Restore pattern key
                }
                if (state.userName) {
                    window.quizUserName = state.userName; // Restore user name
                }
                return true;
            } catch (e) {
                console.error('Error loading quiz state:', e);
                return false;
            }
        }
        return false;
    }

    // Clear quiz state from localStorage
    function clearQuizState() {
        localStorage.removeItem(QUIZ_CONFIG_REF.STORAGE_KEY);
        currentQuestion = 0;
        answers = [];
        totalScore = 0;
        quizCompleted = false;
        formSubmitted = false;
        birthDate = null;
        relationshipStatus = null;
        driverScores = {
            'control': 0,
            'avoidance': 0,
            'validation': 0,
            'fear-of-rejection': 0
        };
    }

    // Astrological calculation functions
    function getSunSign(month, day) {
        const signs = [
            { name: 'Capricorn', start: [12, 22], end: [1, 19] },
            { name: 'Aquarius', start: [1, 20], end: [2, 18] },
            { name: 'Pisces', start: [2, 19], end: [3, 20] },
            { name: 'Aries', start: [3, 21], end: [4, 19] },
            { name: 'Taurus', start: [4, 20], end: [5, 20] },
            { name: 'Gemini', start: [5, 21], end: [6, 20] },
            { name: 'Cancer', start: [6, 21], end: [7, 22] },
            { name: 'Leo', start: [7, 23], end: [8, 22] },
            { name: 'Virgo', start: [8, 23], end: [9, 22] },
            { name: 'Libra', start: [9, 23], end: [10, 22] },
            { name: 'Scorpio', start: [10, 23], end: [11, 21] },
            { name: 'Sagittarius', start: [11, 22], end: [12, 21] }
        ];
        
        for (let sign of signs) {
            if (sign.start[0] === month && day >= sign.start[1]) return sign.name;
            if (sign.end[0] === month && day <= sign.end[1]) return sign.name;
            // Handle Capricorn (Dec 22 - Jan 19)
            if (sign.name === 'Capricorn') {
                if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return sign.name;
            }
        }
        return 'Unknown';
    }

    function getElement(sign) {
        const fire = ['Aries', 'Leo', 'Sagittarius'];
        const earth = ['Taurus', 'Virgo', 'Capricorn'];
        const air = ['Gemini', 'Libra', 'Aquarius'];
        const water = ['Cancer', 'Scorpio', 'Pisces'];
        
        if (fire.includes(sign)) return 'fire';
        if (earth.includes(sign)) return 'earth';
        if (air.includes(sign)) return 'air';
        if (water.includes(sign)) return 'water';
        return 'unknown';
    }

    // Calculate exact age from birthdate
    function calculateExactAge(birthDate) {
        if (!birthDate) return null;
        const today = new Date();
        const birth = new Date(birthDate);
        const age = today.getFullYear() - birth.getFullYear();
        const monthDiff = today.getMonth() - birth.getMonth();
        const actualAge = monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate()) ? age - 1 : age;
        return actualAge >= 18 ? actualAge : null; // Only return if 18+
    }
    
    function getAgeRange(birthDate) {
        const exactAge = calculateExactAge(birthDate);
        if (exactAge === null) return 'unknown';
        
        if (exactAge >= 18 && exactAge <= 27) return '18-27';
        if (exactAge >= 28 && exactAge <= 38) return '28-38';
        if (exactAge >= 39 && exactAge <= 50) return '39-50';
        if (exactAge >= 51) return '51+';
        return 'unknown';
    }

    function parseBirthDate(dateString) {
        // Format: MM/DD/YYYY
        const parts = dateString.split('/');
        if (parts.length !== 3) return null;
        
        const month = parseInt(parts[0], 10);
        const day = parseInt(parts[1], 10);
        const year = parseInt(parts[2], 10);
        
        if (isNaN(month) || isNaN(day) || isNaN(year)) return null;
        if (month < 1 || month > 12) return null;
        if (day < 1 || day > 31) return null;
        
        return {
            month: month,
            day: day,
            year: year,
            dateString: dateString
        };
    }
    
    // ========================================
    // PERSONALIZATION FUNCTIONS
    // ========================================
    // Generate personalized content based on age and relationship status
    
    function getPersonalizedAgeContext(age) {
        if (!age || age < 18) return null;
        
        if (age >= 18 && age < 25) {
            return {
                intro: `At ${age}, you're discovering`,
                context: 'who you are and what you want',
                stage: 'exploration',
                examples: 'dating, career exploration, self-discovery'
            };
        } else if (age >= 25 && age < 30) {
            return {
                intro: `At ${age}, you're building`,
                context: 'your life and relationships',
                stage: 'building',
                examples: 'serious relationships, career growth, establishing yourself'
            };
        } else if (age >= 30 && age < 35) {
            return {
                intro: `At ${age}, you're refining`,
                context: 'your path and deepening connections',
                stage: 'refining',
                examples: 'career advancement, committed relationships, life decisions'
            };
        } else if (age >= 35 && age < 40) {
            return {
                intro: `At ${age}, you're establishing`,
                context: 'your foundation and creating stability',
                stage: 'establishing',
                examples: 'established career, family dynamics, long-term relationships'
            };
        } else if (age >= 40 && age < 50) {
            return {
                intro: `At ${age}, you're in your prime`,
                context: 'with wisdom and experience to draw from',
                stage: 'prime',
                examples: 'mature relationships, career mastery, life experience'
            };
        } else if (age >= 50) {
            return {
                intro: `In your 50s, you're`,
                context: 'drawing from decades of wisdom',
                stage: 'wisdom',
                examples: 'life experience, relationship patterns, personal growth'
            };
        }
        return null;
    }
    
    function getPersonalizedRelationshipContext(relationshipStatus) {
        if (!relationshipStatus || relationshipStatus === 'prefer-not-to-say') return null;
        
        const contexts = {
            'single': {
                focus: 'self-discovery and attracting healthy love',
                intro: 'As someone who is single',
                context: 'your pattern shows up when you\'re dating and exploring connections',
                advice: 'focus on understanding yourself first, then attracting partners who align with your values',
                examples: 'dating, meeting new people, building connections'
            },
            'dating': {
                focus: 'navigating new connections and building healthy relationships',
                intro: 'While you\'re dating',
                context: 'your pattern influences how you show up in new relationships',
                advice: 'be aware of how your pattern affects your dating choices and relationship dynamics',
                examples: 'casual dating, getting to know people, exploring compatibility'
            },
            'committed': {
                focus: 'deepening your relationship and building lasting connection',
                intro: 'In your committed relationship',
                context: 'your pattern shows up in how you communicate and connect with your partner',
                advice: 'understand how your pattern affects your relationship dynamics and work together to grow',
                examples: 'serious relationships, building partnership, deepening connection'
            },
            'married': {
                focus: 'strengthening your marriage and creating lasting partnership',
                intro: 'In your marriage',
                context: 'your pattern influences communication, conflict resolution, and emotional intimacy',
                advice: 'recognize how your pattern shows up in your marriage and work with your partner to create healthier dynamics',
                examples: 'marriage dynamics, communication, partnership, family life'
            },
            'divorced': {
                focus: 'healing from past relationships and breaking old patterns',
                intro: 'After your divorce',
                context: 'your pattern may have played a role in past relationship challenges',
                advice: 'use this insight to heal, break old patterns, and create healthier relationships moving forward',
                examples: 'healing, self-reflection, breaking cycles, new beginnings'
            }
        };
        
        return contexts[relationshipStatus] || null;
    }
    
    function getPersonalizedIntro(age, relationshipStatus, patternName) {
        const ageContext = getPersonalizedAgeContext(age);
        const relationshipContext = getPersonalizedRelationshipContext(relationshipStatus);
        
        // Build personalized introduction
        let intro = '';
        
        if (ageContext && relationshipContext) {
            // Both age and relationship status available
            intro = `${ageContext.intro} ${relationshipContext.context}, ${relationshipContext.intro.toLowerCase()} `;
            intro += `your pattern shows up in ${relationshipContext.examples}. `;
            intro += `Understanding your ${patternName} pattern will help you ${relationshipContext.focus}.`;
        } else if (ageContext) {
            // Only age available
            intro = `${ageContext.intro} ${ageContext.context}, your pattern influences ${ageContext.examples}. `;
            intro += `Recognizing your ${patternName} pattern will help you navigate this stage with more awareness.`;
        } else if (relationshipContext) {
            // Only relationship status available
            intro = `${relationshipContext.intro}, ${relationshipContext.context}. `;
            intro += `Understanding your ${patternName} pattern will help you ${relationshipContext.focus}.`;
        } else {
            // No personalization data - use generic
            intro = `Your ${patternName} pattern influences how you show up in relationships, work, and life. `;
            intro += `Understanding this pattern will help you break cycles and create lasting change.`;
        }
        
        return intro;
    }
    
    function getPersonalizedRelationshipSection(relationshipStatus) {
        const context = getPersonalizedRelationshipContext(relationshipStatus);
        if (!context) return null;
        
        return {
            title: `💑 How Your Pattern Shows Up ${relationshipStatus === 'single' ? 'When Dating' : relationshipStatus === 'married' ? 'In Your Marriage' : 'In Relationships'}`,
            content: `${context.intro}, ${context.context}. ${context.advice}`
        };
    }

    function initQuiz() {
        // Try to restore quiz state on page load
        const hasSavedState = loadQuizState();
        
        if (hasSavedState) {
            const quizIntro = document.getElementById('quiz-intro');
            const quizContent = document.getElementById('quiz-content');
            const quizResults = document.getElementById('quiz-results');
            const quizResultsMain = document.getElementById('quiz-results-main');
            const quizSuccessMessage = document.getElementById('quiz-success-message');
            
            if (formSubmitted && quizSuccessMessage) {
                // Form was submitted, show success message
                if (quizIntro) quizIntro.style.display = 'none';
                if (quizContent) quizContent.style.display = 'none';
                if (quizResults) quizResults.style.display = 'flex';
                if (quizResultsMain) quizResultsMain.style.display = 'none';
                quizSuccessMessage.style.display = 'block';
                restoreSuccessMessage();
                updateResetDate();
            } else if (quizCompleted && quizResults) {
                // Quiz was completed, show results form
                if (quizIntro) quizIntro.style.display = 'none';
                if (quizContent) quizContent.style.display = 'none';
                quizResults.style.display = 'flex';
                if (quizResultsMain) quizResultsMain.style.display = 'block';
                if (quizSuccessMessage) quizSuccessMessage.style.display = 'none';
                restoreResults();
            } else if ((answers.length > 0 || currentQuestion > 0) && quizContent) {
                // Quiz is in progress, restore to current question
                if (quizIntro) quizIntro.style.display = 'none';
                quizContent.style.display = 'flex';
                renderQuestion();
                updateProgress();
            }
        }
        const startBtn = document.getElementById('start-quiz-btn');
        const quizIntro = document.getElementById('quiz-intro');
        const quizContent = document.getElementById('quiz-content');
        const quizResults = document.getElementById('quiz-results');

        if (startBtn) {
            startBtn.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                console.log('Quiz button clicked!');
                
                // Get fresh references in case DOM changed
                const intro = document.getElementById('quiz-intro');
                const content = document.getElementById('quiz-content');
                const results = document.getElementById('quiz-results');
                
                if (!intro || !content || !results) {
                    console.error('Quiz elements not found:', { intro, content, results });
                    return;
                }
                
                // Clear previous state
                clearQuizState();
                
                // Hide intro and results, show quiz content
                intro.style.display = 'none';
                results.style.display = 'none';
                content.style.display = 'flex';
                
                // Reset quiz variables
                currentQuestion = 0;
                answers = [];
                totalScore = 0;
                quizCompleted = false;
                formSubmitted = false;
                
                // Render first question
                if (typeof renderQuestion === 'function') {
                    renderQuestion();
                } else {
                    console.error('renderQuestion function not found');
                }
                
                if (typeof updateProgress === 'function') {
                    updateProgress();
                } else {
                    console.error('updateProgress function not found');
                }
                
                // Save initial state
                saveQuizState();
            });
        } else {
            console.error('Start quiz button not found!');
        }

        const nextBtn = document.getElementById('quiz-next-btn');
        const prevBtn = document.getElementById('quiz-prev-btn');

        if (nextBtn) {
            nextBtn.addEventListener('click', () => {
                const errorMessage = document.getElementById('quiz-error-message');
                const question = quizData[currentQuestion];
                
                // Birth date and relationship status questions are optional, skip validation
                if (question.questionType !== 'birthdate' && question.questionType !== 'relationship-status' && answers[currentQuestion] === undefined) {
                    // Show inline error message
                    if (errorMessage) {
                        errorMessage.style.display = 'block';
                        // Scroll error into view smoothly
                        errorMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                    return;
                }

                // Hide error message if answer is selected or birth date question
                if (errorMessage) {
                    errorMessage.style.display = 'none';
                }

                if (currentQuestion < quizData.length - 1) {
                    currentQuestion++;
                    renderQuestion();
                    updateProgress();
                    saveQuizState(); // Save progress
                } else {
                    calculateResults();
                }
            });
        }

        if (prevBtn) {
            prevBtn.addEventListener('click', () => {
                if (currentQuestion > 0) {
                    currentQuestion--;
                    renderQuestion();
                    updateProgress();
                    saveQuizState(); // Save progress
                }
            });
        }

        // Email form submission
        const emailForm = document.getElementById('quiz-email-form');
        if (emailForm) {
            emailForm.addEventListener('submit', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                try {
                const nameInput = document.getElementById('quiz-name-input');
                const emailInput = document.getElementById('quiz-email-input');
                const phoneInput = document.getElementById('quiz-phone-input');
                    
                    if (!nameInput || !emailInput || !phoneInput) {
                        console.error('Form inputs not found');
                        alert('An error occurred. Please refresh the page and try again.');
                        return;
                    }
                
                const name = nameInput.value.trim();
                const email = emailInput.value.trim();
                const phone = phoneInput.value.trim();
                
                // Validation
                if (!name) {
                    alert('Please enter your name.');
                        nameInput.focus();
                    return;
                }
                
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(email)) {
                    alert('Please enter a valid email address.');
                        emailInput.focus();
                    return;
                }
                
                // Store user name for results page
                window.quizUserName = name;
                saveQuizState(); // Save name to localStorage
                
                if (!phone) {
                    alert('Please enter your phone number.');
                        phoneInput.focus();
                    return;
                }

                    // Ensure driverScores and totalScore are calculated (in case quiz state was restored)
                    if (!driverScores || Object.keys(driverScores).length === 0 || totalScore === 0) {
                        driverScores = {
                            'control': 0,
                            'avoidance': 0,
                            'validation': 0,
                            'fear-of-rejection': 0
                        };
                        
                        totalScore = 0;
                        
                        // Calculate driver scores and total score from answers
                        answers.forEach((answerIndex, questionIndex) => {
                            if (questionIndex < QUIZ_CONFIG_REF.TOTAL_SCORED_QUESTIONS && answerIndex !== undefined) {
                                const option = quizData[questionIndex].options[answerIndex];
                                if (option && option.driver && option.score !== undefined) {
                                    driverScores[option.driver] += option.score;
                                    totalScore += option.score;
                                }
                            }
                        });
                    }
                    
                    // Get pattern data using driverScores
                    const patternKey = determinePattern(driverScores, answers);
                const pattern = personalityPatterns[patternKey];
                    
                    if (!pattern || !pattern.name) {
                        console.error('Pattern not found:', patternKey, pattern, 'driverScores:', driverScores);
                        alert('An error occurred calculating your pattern. Please try again.');
                        return;
                    }
                    
                    // Calculate pattern dominance for success modal
                    const sortedDrivers = Object.entries(driverScores).sort((a, b) => b[1] - a[1]);
                    const dominantScore = sortedDrivers[0][1];
                    const validTotalScore = totalScore || 1;
                    const patternDominance = Math.round((dominantScore / validTotalScore) * 100);
                    
                    // Get context label
                    function getDominanceLabel(dominance) {
                        if (dominance >= 70) return 'Strong';
                        if (dominance >= 50) return 'Moderate';
                        if (dominance >= 30) return 'Balanced';
                        return 'Mixed';
                    }
                    const dominanceLabel = getDominanceLabel(patternDominance);
                    
                    // Calculate driver percentages for display in success modal
                    const driverPercentages = {
                        'control': Math.round((driverScores['control'] / validTotalScore) * 100),
                        'avoidance': Math.round((driverScores['avoidance'] / validTotalScore) * 100),
                        'validation': Math.round((driverScores['validation'] / validTotalScore) * 100),
                        'fear-of-rejection': Math.round((driverScores['fear-of-rejection'] / validTotalScore) * 100)
                    };
                    
                    window.quizPatternDominance = patternDominance;
                    window.quizDominanceLabel = dominanceLabel;
                    window.quizDriverPercentages = driverPercentages;
                    window.quizArchetypeCategory = pattern.archetypeCategory || archetypeCategories[sortedDrivers[0][0]]?.name;
                    window.quizPatternName = pattern.name;
                    
                    // Store personalization data for email report
                    const exactAge = calculateExactAge(birthDate);
                    window.quizExactAge = exactAge;
                    window.quizRelationshipStatus = relationshipStatus;
                    
                    // Generate personalized intro for email report (handles missing data gracefully)
                    if (exactAge || relationshipStatus) {
                        window.quizPersonalizedIntro = getPersonalizedIntro(exactAge, relationshipStatus, pattern.name);
                        window.quizPersonalizedRelationshipSection = getPersonalizedRelationshipSection(relationshipStatus);
                    } else {
                        window.quizPersonalizedIntro = null;
                        window.quizPersonalizedRelationshipSection = null;
                    }

                // Submit to Google Forms
                const tempForm = document.createElement('form');
                tempForm.action = 'https://docs.google.com/forms/d/e/1FAIpQLSdMfNDBBsnuE2Q1_Gn57Y_FJmpWTw0h00bTStNd5Bju07mTKA/formResponse';
                tempForm.method = 'POST';
                tempForm.target = 'quiz-hidden-iframe';
                tempForm.style.display = 'none';

                // Name field (update with actual Google Form entry ID)
                const inputName = document.createElement('input');
                inputName.type = 'hidden';
                inputName.name = 'entry.XXXXX'; // Update with actual entry ID for name
                inputName.value = name;
                tempForm.appendChild(inputName);

                // Email field
                const inputEmail = document.createElement('input');
                inputEmail.type = 'hidden';
                inputEmail.name = 'entry.649844771';
                inputEmail.value = email;
                tempForm.appendChild(inputEmail);

                // Phone field (update with actual Google Form entry ID)
                const inputPhone = document.createElement('input');
                inputPhone.type = 'hidden';
                inputPhone.name = 'entry.XXXXX'; // Update with actual entry ID for phone
                inputPhone.value = phone;
                tempForm.appendChild(inputPhone);

                // Score field (max is 53 questions × 3 points = 159)
                const inputScore = document.createElement('input');
                inputScore.type = 'hidden';
                inputScore.name = 'entry.673635167';
                inputScore.value = `${totalScore}/${QUIZ_CONFIG_REF.MAX_SCORE}`;
                tempForm.appendChild(inputScore);

                // Pattern field (update with actual Google Form entry ID)
                const inputPattern = document.createElement('input');
                inputPattern.type = 'hidden';
                inputPattern.name = 'entry.XXXXX'; // Update with actual entry ID for pattern
                inputPattern.value = pattern.name;
                tempForm.appendChild(inputPattern);

                // Birth date field (update with actual Google Form entry ID)
                if (birthDate) {
                    const inputBirthDate = document.createElement('input');
                    inputBirthDate.type = 'hidden';
                    inputBirthDate.name = 'entry.XXXXX'; // Update with actual entry ID for birth date
                    inputBirthDate.value = birthDate;
                    tempForm.appendChild(inputBirthDate);
                    
                    // Calculate and submit exact age for personalization
                    const exactAge = calculateExactAge(birthDate);
                    if (exactAge) {
                        const inputExactAge = document.createElement('input');
                        inputExactAge.type = 'hidden';
                        inputExactAge.name = 'entry.XXXXX'; // Update with actual entry ID for exact age
                        inputExactAge.value = exactAge.toString();
                        tempForm.appendChild(inputExactAge);
                    }
                    
                    // Calculate and submit astrological data (for analytics only, not used in results)
                    const parsedDate = parseBirthDate(birthDate);
                    if (parsedDate) {
                        const sunSign = getSunSign(parsedDate.month, parsedDate.day);
                        const element = getElement(sunSign);
                        const ageRange = getAgeRange(birthDate);
                        
                        // Sun sign field
                        const inputSunSign = document.createElement('input');
                        inputSunSign.type = 'hidden';
                        inputSunSign.name = 'entry.XXXXX'; // Update with actual entry ID
                        inputSunSign.value = sunSign;
                        tempForm.appendChild(inputSunSign);
                        
                        // Element field
                        const inputElement = document.createElement('input');
                        inputElement.type = 'hidden';
                        inputElement.name = 'entry.XXXXX'; // Update with actual entry ID
                        inputElement.value = element;
                        tempForm.appendChild(inputElement);
                        
                        // Age range field
                        const inputAgeRange = document.createElement('input');
                        inputAgeRange.type = 'hidden';
                        inputAgeRange.name = 'entry.XXXXX'; // Update with actual entry ID
                        inputAgeRange.value = ageRange;
                        tempForm.appendChild(inputAgeRange);
                    }
                }

                // Relationship status field (update with actual Google Form entry ID)
                if (relationshipStatus) {
                    const inputRelationshipStatus = document.createElement('input');
                    inputRelationshipStatus.type = 'hidden';
                    inputRelationshipStatus.name = 'entry.XXXXX'; // Update with actual entry ID for relationship status
                    inputRelationshipStatus.value = relationshipStatus;
                    tempForm.appendChild(inputRelationshipStatus);
                }
                
                // Driver scores (for analytics)
                const inputDriverScores = document.createElement('input');
                inputDriverScores.type = 'hidden';
                inputDriverScores.name = 'entry.XXXXX'; // Update with actual entry ID
                inputDriverScores.value = JSON.stringify(driverScores);
                tempForm.appendChild(inputDriverScores);

                document.body.appendChild(tempForm);
                tempForm.submit();

                // Mark form as submitted and save state
                formSubmitted = true;
                saveQuizState();

                    // Show success message with pattern name and dominance
                setTimeout(() => {
                        const resultsMain = document.getElementById('quiz-results-main');
                        const successMessage = document.getElementById('quiz-success-message');
                    const patternNameElement = document.getElementById('quiz-success-pattern-name');
                        const patternNameText = patternNameElement ? patternNameElement.querySelector('.pattern-name-text') : null;
                        const driversPreview = document.getElementById('pattern-drivers-preview');
                        
                        if (resultsMain) resultsMain.style.display = 'none';
                        if (patternNameText && pattern) {
                            // Show Tier 1 + Tier 2 in success modal (full pattern identity)
                            const archetypeCategory = window.quizArchetypeCategory || pattern.archetypeCategory || 'The Pattern';
                            const patternName = window.quizPatternName || pattern.name;
                            patternNameText.textContent = `${archetypeCategory}: ${patternName}`;
                        }
                        if (driversPreview) {
                            // Show top 2 emotional drivers (simple, minimal design)
                            if (window.quizDriverPercentages && Object.keys(window.quizDriverPercentages).length > 0) {
                                const driverLabels = {
                                    'control': 'Control',
                                    'avoidance': 'Avoidance',
                                    'validation': 'Validation',
                                    'fear-of-rejection': 'Fear of Rejection'
                                };
                                const sortedDrivers = Object.entries(window.quizDriverPercentages)
                                    .sort((a, b) => b[1] - a[1])
                                    .slice(0, 2);
                                
                                if (sortedDrivers.length > 0) {
                                    const driversHTML = sortedDrivers.map(([driver, percentage]) => {
                                        return `<span class="driver-item"><span class="driver-label">${driverLabels[driver]}:</span> <span class="driver-value">${percentage}%</span></span>`;
                                    }).join(' • ');
                                    driversPreview.innerHTML = driversHTML;
                                    driversPreview.style.display = 'block';
                                } else {
                                    driversPreview.style.display = 'none';
                                }
                            } else {
                                driversPreview.style.display = 'none';
                            }
                        }
                        if (successMessage) {
                            successMessage.style.display = 'block';
                            updateResetDate();
                        }
                }, 500);
                } catch (error) {
                    console.error('Error submitting form:', error);
                    alert('An error occurred while submitting your information. Please try again.');
                }
            });
        } else {
            console.error('Quiz email form not found!');
        }
    }

    function updateNextButtonState() {
        const nextBtn = document.getElementById('quiz-next-btn');
        const question = quizData[currentQuestion];
        
        if (!nextBtn) return;
        
        // Update button text
        nextBtn.textContent = currentQuestion === quizData.length - 1 ? 'See Results' : 'Next';
        
        // Birth date and relationship status questions are optional, so button is always active (filled)
        if (question.questionType === 'birthdate' || question.questionType === 'relationship-status') {
            nextBtn.classList.remove('btn-mission');
            nextBtn.classList.add('btn-mission-primary');
            return;
        }
        
        // For regular questions, check if answer is selected
        const hasAnswer = answers[currentQuestion] !== undefined;
        
        if (hasAnswer) {
            // Answer selected: filled red (active)
            nextBtn.classList.remove('btn-mission');
            nextBtn.classList.add('btn-mission-primary');
        } else {
            // No answer: outlined (inactive)
            nextBtn.classList.remove('btn-mission-primary');
            nextBtn.classList.add('btn-mission');
        }
    }

    function renderQuestion() {
        const questionContainer = document.getElementById('quiz-question-container');
        const question = quizData[currentQuestion];
        const prevBtn = document.getElementById('quiz-prev-btn');
        const nextBtn = document.getElementById('quiz-next-btn');
        const errorMessage = document.getElementById('quiz-error-message');

        // Hide error message when rendering new question
        if (errorMessage) {
            errorMessage.style.display = 'none';
        }

        if (prevBtn) {
            prevBtn.style.display = currentQuestion > 0 ? 'block' : 'none';
        }

        // Update Next button state based on answer selection
        updateNextButtonState();

        if (questionContainer) {
            // Handle birth date question differently
            if (question.questionType === 'birthdate') {
                questionContainer.innerHTML = `
                    <div class="quiz-question">${question.question}</div>
                    <div class="quiz-birthdate-input">
                        <input type="text" 
                               id="quiz-birthdate-input" 
                               placeholder="MM/DD/YYYY" 
                               value="${birthDate || ''}"
                               maxlength="10"
                               pattern="[0-9]{2}/[0-9]{2}/[0-9]{4}">
                        <small class="quiz-birthdate-hint">Enter as MM/DD/YYYY (optional)</small>
                    </div>
                `;
                
                // Add input formatting for birth date
                const birthDateInput = document.getElementById('quiz-birthdate-input');
                if (birthDateInput) {
                    birthDateInput.addEventListener('input', function(e) {
                        let value = e.target.value.replace(/\D/g, '');
                        if (value.length >= 2) {
                            value = value.substring(0, 2) + '/' + value.substring(2);
                        }
                        if (value.length >= 5) {
                            value = value.substring(0, 5) + '/' + value.substring(5, 9);
                        }
                        e.target.value = value;
                        birthDate = value;
                        saveQuizState();
                    });
                }
            } else if (question.questionType === 'relationship-status') {
                // Handle relationship status question with dropdown
                questionContainer.innerHTML = `
                    <div class="quiz-question">${question.question}</div>
                    <div class="quiz-relationship-status-input">
                        <select id="quiz-relationship-status-select" class="quiz-select">
                            <option value="">Select an option (optional)</option>
                            ${question.options.map(option => `
                                <option value="${option.value}" ${relationshipStatus === option.value ? 'selected' : ''}>${option.text}</option>
                            `).join('')}
                        </select>
                    </div>
                `;
                
                // Add change handler for relationship status
                const relationshipStatusSelect = document.getElementById('quiz-relationship-status-select');
                if (relationshipStatusSelect) {
                    relationshipStatusSelect.addEventListener('change', function(e) {
                        relationshipStatus = e.target.value || null;
                        saveQuizState();
                        updateNextButtonState();
                    });
                }
            } else {
                // Regular multiple choice question
            questionContainer.innerHTML = `
                <div class="quiz-question">${question.question}</div>
                <div class="quiz-options">
                    ${question.options.map((option, index) => `
                        <div class="quiz-option ${answers[currentQuestion] === index ? 'selected' : ''}" data-index="${index}">
                            <span class="quiz-option-text">${String.fromCharCode(65 + index)}. ${option.text}</span>
                        </div>
                    `).join('')}
                </div>
            `;

            // Add click handlers for options
            const optionElements = questionContainer.querySelectorAll('.quiz-option');
            optionElements.forEach((optionEl, index) => {
                optionEl.addEventListener('click', () => {
                    // Remove selected from all options
                    optionElements.forEach(el => el.classList.remove('selected'));
                    // Add selected to clicked option
                    optionEl.classList.add('selected');
                    // Save answer
                    answers[currentQuestion] = index;
                    saveQuizState(); // Save answer selection
                        
                        // Update Next button to active state (filled red)
                        updateNextButtonState();
                    
                    // Hide error message when user selects an answer
                    const errorMessage = document.getElementById('quiz-error-message');
                    if (errorMessage) {
                        errorMessage.style.display = 'none';
                    }
                });
            });
            }
        }
    }

    function updateProgress() {
        const progressBar = document.getElementById('quiz-progress-bar');
        const progressText = document.getElementById('quiz-progress-text');
        const progress = ((currentQuestion + 1) / quizData.length) * 100;
        const progressPercent = Math.round(progress);

        if (progressBar) {
            progressBar.innerHTML = `<div class="quiz-progress-bar-fill" style="width: ${progress}%"></div>`;
        }

        if (progressText) {
            progressText.textContent = `${progressPercent}%`;
        }
    }

    // Use PatternDeterminer module for pattern determination
    // Fallback function if module not loaded
    function determinePattern(driverScores, answers) {
        // Check if PatternDeterminer module is available
        if (window.PatternDeterminer && typeof window.PatternDeterminer.determinePattern === 'function') {
            return window.PatternDeterminer.determinePattern(
                driverScores, 
                answers, 
                quizData, 
                personalityPatterns, 
                archetypeCategories
            );
        }
        
        // Fallback: simple driver-based determination if module not loaded
        const sortedDrivers = Object.entries(driverScores)
            .sort((a, b) => b[1] - a[1]);
        const dominantDriver = sortedDrivers[0][0];
        
        // Simple fallback mapping
        const fallbackPatterns = {
            'control': 'fixer',
            'avoidance': 'escaper',
            'validation': 'pleaser',
            'fear-of-rejection': 'guarded-one'
        };
        
        return fallbackPatterns[dominantDriver] || 'fixer';
    }

    function calculateResults() {
        // Reset driver scores
        driverScores = {
            'control': 0,
            'avoidance': 0,
            'validation': 0,
            'fear-of-rejection': 0
        };
        
        totalScore = 0;
        
        // Calculate driver scores and total score (skip birth date and relationship status questions)
        answers.forEach((answerIndex, questionIndex) => {
            if (questionIndex < QUIZ_CONFIG_REF.TOTAL_SCORED_QUESTIONS && answerIndex !== undefined) { // Skip birth date and relationship status questions
                const option = quizData[questionIndex].options[answerIndex];
                if (option && option.driver && option.score !== undefined) {
                    driverScores[option.driver] += option.score;
                    totalScore += option.score;
                }
            }
        });

        // Determine personality pattern using driver scores
        const patternKey = determinePattern(driverScores, answers);
        window.quizPatternKey = patternKey; // Store for results page
        const pattern = personalityPatterns[patternKey];

        // Calculate pattern dominance (dominant driver score / total score)
        const sortedDrivers = Object.entries(driverScores).sort((a, b) => b[1] - a[1]);
        const dominantDriver = sortedDrivers[0][0];
        const dominantScore = sortedDrivers[0][1];
        const secondaryDriver = sortedDrivers[1] ? sortedDrivers[1][0] : null;
        const secondaryScore = sortedDrivers[1] ? sortedDrivers[1][1] : 0;
        const validTotalScore = totalScore || 1; // Avoid division by zero
        const patternDominance = Math.round((dominantScore / validTotalScore) * 100);
        
        // Calculate driver percentages for breakdown
        const driverPercentages = {
            'control': Math.round((driverScores['control'] / validTotalScore) * 100),
            'avoidance': Math.round((driverScores['avoidance'] / validTotalScore) * 100),
            'validation': Math.round((driverScores['validation'] / validTotalScore) * 100),
            'fear-of-rejection': Math.round((driverScores['fear-of-rejection'] / validTotalScore) * 100)
        };
        
        // Get context label based on dominance level
        function getDominanceLabel(dominance) {
            if (dominance >= 70) return 'Strong';
            if (dominance >= 50) return 'Moderate';
            if (dominance >= 30) return 'Balanced';
            return 'Mixed';
        }
        const dominanceLabel = getDominanceLabel(patternDominance);

        // Calculate secondary pattern if secondary driver is significant (≥25%)
        let secondaryPattern = null;
        let secondaryPatternName = null;
        if (secondaryDriver && secondaryScore > 0) {
            const secondaryDriverPercentage = Math.round((secondaryScore / validTotalScore) * 100);
            if (secondaryDriverPercentage >= 25) {
                // Determine secondary pattern archetype
                const tempDriverScores = { ...driverScores };
                // Temporarily swap to find secondary pattern
                const tempSorted = Object.entries(tempDriverScores).sort((a, b) => b[1] - a[1]);
                if (tempSorted[1] && tempSorted[1][1] > 0) {
                    const secondaryDriverKey = tempSorted[1][0];
                    // Create a modified driver scores object with secondary as dominant
                    const modifiedScores = {
                        'control': secondaryDriverKey === 'control' ? secondaryScore : 0,
                        'avoidance': secondaryDriverKey === 'avoidance' ? secondaryScore : 0,
                        'validation': secondaryDriverKey === 'validation' ? secondaryScore : 0,
                        'fear-of-rejection': secondaryDriverKey === 'fear-of-rejection' ? secondaryScore : 0
                    };
                    const secondaryPatternKey = determinePattern(modifiedScores, answers);
                    secondaryPattern = personalityPatterns[secondaryPatternKey];
                    secondaryPatternName = secondaryPattern ? secondaryPattern.name : null;
                }
            }
        }

        // Mark quiz as completed
        quizCompleted = true;
        saveQuizState(); // Save completed state

        // Hide quiz content, show results
        document.getElementById('quiz-content').style.display = 'none';
        document.getElementById('quiz-results').style.display = 'flex';
        document.getElementById('quiz-results-main').style.display = 'block';
        
        // Update results display - show only Tier 1 archetype (mysterious, creates maximum curiosity)
        const resultsTitle = document.getElementById('quiz-results-title');
        if (resultsTitle) {
            // Get Tier 1 archetype category (mysterious, creates curiosity)
            const archetypeCategory = pattern.archetypeCategory || archetypeCategories[dominantDriver]?.name || 'The Pattern';
            
            // Show only Tier 1 archetype before email submission (maximum curiosity - no description to gatekeep)
            let resultsHTML = `<div class="pattern-name-display">You're <strong>${archetypeCategory}</strong></div>`;
            
            // NO subtitle - gatekeep description for email report to maximize conversion
            // Description will be revealed in the personalized email report
            
            resultsTitle.innerHTML = resultsHTML;
            resultsTitle.style.display = 'block';
        }
        
        // Update email subtitle dynamically with archetype name for maximum conversion
        const emailSubtitle = document.getElementById('quiz-email-subtitle');
        const archetypeDynamic = document.getElementById('quiz-archetype-dynamic');
        if (emailSubtitle && archetypeDynamic) {
            const archetypeCategory = pattern.archetypeCategory || archetypeCategories[dominantDriver]?.name || 'Pattern';
            // Remove "The " prefix for natural reading
            const archetypeName = archetypeCategory.replace(/^The /, '');
            archetypeDynamic.textContent = archetypeName;
        }
        
        // Store pattern data for success modal (Tier 1 + Tier 2)
        window.quizPatternDominance = patternDominance;
        window.quizDominanceLabel = dominanceLabel;
        window.quizDriverPercentages = driverPercentages;
        window.quizSecondaryPattern = secondaryPatternName;
        window.quizArchetypeCategory = pattern.archetypeCategory || archetypeCategories[dominantDriver]?.name;
        window.quizPatternName = pattern.name; // Tier 2 pattern name
        const secondaryDriverPercentage = secondaryDriver && secondaryScore > 0 ? Math.round((secondaryScore / validTotalScore) * 100) : 0;
        window.quizSecondaryDriverPercentage = secondaryDriverPercentage;
        
        // Store personalization data for email report
        const exactAge = calculateExactAge(birthDate);
        window.quizExactAge = exactAge;
        window.quizRelationshipStatus = relationshipStatus;
        
        // Generate personalized intro for email report (handles missing data gracefully)
        if (exactAge || relationshipStatus) {
            window.quizPersonalizedIntro = getPersonalizedIntro(exactAge, relationshipStatus, pattern.name);
            window.quizPersonalizedRelationshipSection = getPersonalizedRelationshipSection(relationshipStatus);
        } else {
            window.quizPersonalizedIntro = null;
            window.quizPersonalizedRelationshipSection = null;
        }
        
        // Set hidden form fields
        const scoreHidden = document.getElementById('quiz-score-hidden');
        const patternHidden = document.getElementById('quiz-pattern-hidden');
        if (scoreHidden) {
            scoreHidden.value = `${totalScore}/${QUIZ_CONFIG_REF.MAX_SCORE}`;
        }
        if (patternHidden && pattern && pattern.name) {
            // Store both Tier 1 and Tier 2 for email report
            patternHidden.value = `${pattern.archetypeCategory || archetypeCategories[dominantDriver]?.name}: ${pattern.name}`;
        }

        // Scroll to results
        document.getElementById('quiz-results').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Restore results display when quiz was previously completed
    function restoreResults() {
        // Ensure driverScores and totalScore are calculated (in case quiz state was restored)
        if (!driverScores || Object.keys(driverScores).length === 0 || totalScore === 0) {
            driverScores = {
                'control': 0,
                'avoidance': 0,
                'validation': 0,
                'fear-of-rejection': 0
            };
            
            totalScore = 0;
            
            // Calculate driver scores and total score from answers
            answers.forEach((answerIndex, questionIndex) => {
                if (questionIndex < QUIZ_CONFIG_REF.TOTAL_SCORED_QUESTIONS && answerIndex !== undefined) {
                    const option = quizData[questionIndex].options[answerIndex];
                    if (option && option.driver && option.score !== undefined) {
                        driverScores[option.driver] += option.score;
                        totalScore += option.score;
                    }
                }
            });
        }
        
        const patternKey = determinePattern(driverScores, answers);
        const pattern = personalityPatterns[patternKey];
        
        // Calculate pattern dominance (dominant driver score / total score)
        const sortedDrivers = Object.entries(driverScores).sort((a, b) => b[1] - a[1]);
        const dominantDriver = sortedDrivers[0][0];
        const dominantScore = sortedDrivers[0][1];
        const secondaryDriver = sortedDrivers[1] ? sortedDrivers[1][0] : null;
        const secondaryScore = sortedDrivers[1] ? sortedDrivers[1][1] : 0;
        const validTotalScore = totalScore || 1; // Avoid division by zero
        const patternDominance = Math.round((dominantScore / validTotalScore) * 100);
        
        // Calculate driver percentages for breakdown
        const driverPercentages = {
            'control': Math.round((driverScores['control'] / validTotalScore) * 100),
            'avoidance': Math.round((driverScores['avoidance'] / validTotalScore) * 100),
            'validation': Math.round((driverScores['validation'] / validTotalScore) * 100),
            'fear-of-rejection': Math.round((driverScores['fear-of-rejection'] / validTotalScore) * 100)
        };
        
        // Get context label based on dominance level
        function getDominanceLabel(dominance) {
            if (dominance >= 70) return 'Strong';
            if (dominance >= 50) return 'Moderate';
            if (dominance >= 30) return 'Balanced';
            return 'Mixed';
        }
        const dominanceLabel = getDominanceLabel(patternDominance);

        // Calculate secondary pattern if secondary driver is significant (≥25%)
        let secondaryPattern = null;
        let secondaryPatternName = null;
        if (secondaryDriver && secondaryScore > 0) {
            const secondaryDriverPercentage = Math.round((secondaryScore / validTotalScore) * 100);
            if (secondaryDriverPercentage >= 25) {
                // Determine secondary pattern archetype
                const modifiedScores = {
                    'control': secondaryDriver === 'control' ? secondaryScore : 0,
                    'avoidance': secondaryDriver === 'avoidance' ? secondaryScore : 0,
                    'validation': secondaryDriver === 'validation' ? secondaryScore : 0,
                    'fear-of-rejection': secondaryDriver === 'fear-of-rejection' ? secondaryScore : 0
                };
                const secondaryPatternKey = determinePattern(modifiedScores, answers);
                secondaryPattern = personalityPatterns[secondaryPatternKey];
                secondaryPatternName = secondaryPattern ? secondaryPattern.name : null;
            }
        }
        
        // Update results display - show only Tier 1 archetype (mysterious, creates maximum curiosity)
        const resultsTitle = document.getElementById('quiz-results-title');
        if (resultsTitle) {
            // Get Tier 1 archetype category (mysterious, creates curiosity)
            const archetypeCategory = pattern.archetypeCategory || archetypeCategories[dominantDriver]?.name || 'The Pattern';
            
            // Show only Tier 1 archetype before email submission (maximum curiosity - no description to gatekeep)
            let resultsHTML = `<div class="pattern-name-display">You're <strong>${archetypeCategory}</strong></div>`;
            
            // NO subtitle - gatekeep description for email report to maximize conversion
            // Description will be revealed in the personalized email report
            
            resultsTitle.innerHTML = resultsHTML;
            resultsTitle.style.display = 'block';
        }
        
        // Update email subtitle dynamically with archetype name for maximum conversion
        const emailSubtitle = document.getElementById('quiz-email-subtitle');
        const archetypeDynamic = document.getElementById('quiz-archetype-dynamic');
        if (emailSubtitle && archetypeDynamic) {
            const archetypeCategory = pattern.archetypeCategory || archetypeCategories[dominantDriver]?.name || 'Pattern';
            // Remove "The " prefix for natural reading
            const archetypeName = archetypeCategory.replace(/^The /, '');
            archetypeDynamic.textContent = archetypeName;
        }
        
        // Store pattern data for success modal (Tier 1 + Tier 2)
        window.quizPatternDominance = patternDominance;
        window.quizDominanceLabel = dominanceLabel;
        window.quizDriverPercentages = driverPercentages;
        window.quizSecondaryPattern = secondaryPatternName;
        window.quizArchetypeCategory = pattern.archetypeCategory || archetypeCategories[dominantDriver]?.name;
        window.quizPatternName = pattern.name; // Tier 2 pattern name
        const secondaryDriverPercentage = secondaryDriver && secondaryScore > 0 ? Math.round((secondaryScore / validTotalScore) * 100) : 0;
        window.quizSecondaryDriverPercentage = secondaryDriverPercentage;
        
        // Set hidden form fields
        const scoreHidden = document.getElementById('quiz-score-hidden');
        const patternHidden = document.getElementById('quiz-pattern-hidden');
        if (scoreHidden) {
            scoreHidden.value = `${totalScore}/${QUIZ_CONFIG_REF.MAX_SCORE}`;
        }
        if (patternHidden && pattern && pattern.name) {
            // Store both Tier 1 and Tier 2 for email report
            patternHidden.value = `${pattern.archetypeCategory || archetypeCategories[dominantDriver]?.name}: ${pattern.name}`;
        }
    }

    // Restore success message display when form was previously submitted
    // Group configuration - UPDATE THESE VALUES
    const GROUP_CONFIG = {
        maxSpots: 10, // Ideal first launch size: 8-10 (research shows 6-12 is optimal)
        currentSpots: 0, // Update this with actual enrolled count, or leave 0 to hide spots
        showSpotsRemaining: true // Set to false to always show "Reserve Your Spot"
    };
    
    // Calculate next group start date (1st of each month)
    function getNextResetDate() {
        const now = new Date();
        const currentMonth = now.getMonth();
        const currentYear = now.getFullYear();
        const currentDay = now.getDate();
        
        // If we're past the 1st, next group is 1st of next month
        // If we're on or before the 1st, next group is 1st of this month
        let nextMonth = currentMonth;
        let nextYear = currentYear;
        
        if (currentDay > 1) {
            // Past the 1st, so next group is next month
            nextMonth = currentMonth + 1;
            if (nextMonth > 11) {
                nextMonth = 0;
                nextYear = currentYear + 1;
            }
        }
        
        const nextDate = new Date(nextYear, nextMonth, 1);
        const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 
                           'July', 'August', 'September', 'October', 'November', 'December'];
        
        return {
            date: nextDate,
            formatted: `${monthNames[nextMonth]} 1st`,
            short: `${monthNames[nextMonth].substring(0, 3)} 1`
        };
    }
    
    // Calculate spots remaining
    function getSpotsRemaining() {
        if (!GROUP_CONFIG.showSpotsRemaining || GROUP_CONFIG.currentSpots === 0) {
            return null;
        }
        const remaining = GROUP_CONFIG.maxSpots - GROUP_CONFIG.currentSpots;
        return remaining > 0 ? remaining : 0;
    }
    
    // Update reset date and CTA in success message
    function updateResetDate() {
        const nextReset = getNextResetDate();
        const dateBoldElement = document.getElementById('next-reset-date-bold');
        const ctaTextElement = document.getElementById('cta-text');
        const ctaSpotsElement = document.getElementById('cta-spots');
        
        if (dateBoldElement) {
            dateBoldElement.textContent = nextReset.formatted;
        }
        
        // Update CTA based on spots remaining
        const spotsRemaining = getSpotsRemaining();
        if (spotsRemaining !== null && spotsRemaining > 0 && ctaTextElement && ctaSpotsElement) {
            if (spotsRemaining <= 3) {
                // Urgency: "Only X Spots Left"
                ctaTextElement.textContent = `Only ${spotsRemaining} Spot${spotsRemaining === 1 ? '' : 's'} Left`;
            } else if (spotsRemaining <= 5) {
                // Moderate urgency: "X Spots Available"
                ctaTextElement.textContent = `${spotsRemaining} Spots Available`;
            } else {
                // Standard: "Reserve Your Spot"
                ctaTextElement.textContent = 'Reserve Your Spot';
            }
        } else if (ctaTextElement) {
            // Default: "Reserve Your Spot"
            ctaTextElement.textContent = 'Reserve Your Spot';
        }
    }
    
    function restoreSuccessMessage() {
        // Ensure driverScores is calculated (in case quiz state was restored)
        if (!driverScores || Object.keys(driverScores).length === 0) {
            driverScores = {
                'control': 0,
                'avoidance': 0,
                'validation': 0,
                'fear-of-rejection': 0
            };
            
            // Calculate driver scores from answers
            answers.forEach((answerIndex, questionIndex) => {
                if (questionIndex < QUIZ_CONFIG_REF.TOTAL_SCORED_QUESTIONS && answerIndex !== undefined) {
                    const option = quizData[questionIndex].options[answerIndex];
                    if (option && option.driver && option.score !== undefined) {
                        driverScores[option.driver] += option.score;
                    }
                }
            });
        }
        
        const patternKey = determinePattern(driverScores, answers);
        const pattern = personalityPatterns[patternKey];
        
        // Ensure totalScore is calculated if missing
        if (totalScore === 0 && driverScores) {
            totalScore = Object.values(driverScores).reduce((sum, score) => sum + score, 0);
        }
        
        // Calculate pattern dominance
        const sortedDrivers = Object.entries(driverScores).sort((a, b) => b[1] - a[1]);
        const dominantDriver = sortedDrivers[0][0];
        const dominantScore = sortedDrivers[0][1];
        const validTotalScore = totalScore || 1;
        const patternDominance = Math.round((dominantScore / validTotalScore) * 100);
        
        // Calculate driver percentages for display
        const driverPercentages = {
            'control': Math.round((driverScores['control'] / validTotalScore) * 100),
            'avoidance': Math.round((driverScores['avoidance'] / validTotalScore) * 100),
            'validation': Math.round((driverScores['validation'] / validTotalScore) * 100),
            'fear-of-rejection': Math.round((driverScores['fear-of-rejection'] / validTotalScore) * 100)
        };
        
        // Get context label
        function getDominanceLabel(dominance) {
            if (dominance >= 70) return 'Strong';
            if (dominance >= 50) return 'Moderate';
            if (dominance >= 30) return 'Balanced';
            return 'Mixed';
        }
        const dominanceLabel = getDominanceLabel(patternDominance);
        
        // Store in window variables for consistency
        window.quizPatternDominance = patternDominance;
        window.quizDominanceLabel = dominanceLabel;
        window.quizDriverPercentages = driverPercentages;
        window.quizArchetypeCategory = pattern.archetypeCategory || archetypeCategories[dominantDriver]?.name;
        window.quizPatternName = pattern.name;
        
        // Update success message with pattern name
        const patternNameElement = document.getElementById('quiz-success-pattern-name');
        const patternNameText = patternNameElement ? patternNameElement.querySelector('.pattern-name-text') : null;
        const driversPreview = document.getElementById('pattern-drivers-preview');
        
        if (patternNameText && pattern) {
            // Show Tier 1 + Tier 2 in success modal (full pattern identity)
            const archetypeCategory = window.quizArchetypeCategory || pattern.archetypeCategory || 'The Pattern';
            const patternName = window.quizPatternName || pattern.name;
            patternNameText.textContent = `${archetypeCategory}: ${patternName}`;
        }
        if (driversPreview) {
            // Show top 2 emotional drivers (simple, minimal design)
            if (driverPercentages && Object.keys(driverPercentages).length > 0) {
                const driverLabels = {
                    'control': 'Control',
                    'avoidance': 'Avoidance',
                    'validation': 'Validation',
                    'fear-of-rejection': 'Fear of Rejection'
                };
                const sortedDrivers = Object.entries(driverPercentages)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 2);
                
                if (sortedDrivers.length > 0) {
                    const driversHTML = sortedDrivers.map(([driver, percentage]) => {
                        return `<span class="driver-item"><span class="driver-label">${driverLabels[driver]}:</span> <span class="driver-value">${percentage}%</span></span>`;
                    }).join(' • ');
                    driversPreview.innerHTML = driversHTML;
                    driversPreview.style.display = 'block';
                } else {
                    driversPreview.style.display = 'none';
                }
            } else {
                driversPreview.style.display = 'none';
            }
        }
        
        // Update reset date
        updateResetDate();
    }

    // Initialize quiz on page load
    document.addEventListener('DOMContentLoaded', function() {
        try {
            initQuiz();
        } catch (error) {
            console.error('Error initializing quiz:', error);
        }
    });

    // Custom Google Analytics Events for Homepage Newsletter Tracking
    function trackHomepageEvent(eventName, eventParameters = {}) {
        if (typeof gtag !== 'undefined') {
            gtag('event', eventName, {
                event_category: 'homepage_engagement',
                event_label: 'newsletter_signup',
                ...eventParameters
            });
            console.log('Homepage event tracked:', eventName, eventParameters);
        }
    }

    // Track homepage newsletter signups
    function trackHomepageNewsletterSignup(signupSource, listType) {
        trackHomepageEvent('newsletter_signup', {
            signup_source: signupSource, // 'popup', 'footer'
            list_type: listType, // 'email_list', 'movement_updates'
            signup_category: 'homepage_engagement'
        });
    }

    // Track popup interactions
    function trackPopupInteraction(interactionType, popupType) {
        trackHomepageEvent('popup_interaction', {
            interaction_type: interactionType, // 'view', 'close', 'signup'
            popup_type: popupType, // 'newsletter_popup', 'welcome_popup'
            interaction_category: 'popup_engagement'
        });
    }

    // Track movement engagement
    function trackMovementEngagement(engagementType, engagementSource) {
        trackHomepageEvent('movement_engagement', {
            engagement_type: engagementType, // 'click', 'view', 'share'
            engagement_source: engagementSource, // 'hero', 'stories', 'footer'
            engagement_category: 'movement_participation'
        });
    }

    // Track social media clicks from homepage
    function trackHomepageSocialClick(platform, pageLocation) {
        trackHomepageEvent('social_click', {
            platform: platform, // 'instagram', 'tiktok'
            page_location: pageLocation, // 'hero', 'footer', 'stories'
            click_type: 'social_engagement'
        });
    }

    // Track homepage navigation
    function trackHomepageNavigation(fromSection, toSection) {
        trackHomepageEvent('homepage_navigation', {
            from_section: fromSection, // 'hero', 'stories', 'footer'
            to_section: toSection,
            navigation_type: 'homepage_exploration'
        });
    }

    // Track homepage session duration
    let homepageSessionStartTime = Date.now();
    let homepageInteractionsCount = 0;

    window.addEventListener('beforeunload', function() {
        const sessionDuration = Math.round((Date.now() - homepageSessionStartTime) / 1000 / 60); // minutes
        if (sessionDuration > 1) { // Only track if session was longer than 1 minute
            trackHomepageEvent('homepage_session_duration', {
                duration_minutes: sessionDuration,
                interactions_count: homepageInteractionsCount,
                session_type: 'homepage_engagement'
            });
        }
    });

    // Track return visits to homepage
    let homepageVisitCount = localStorage.getItem('homepageVisitCount') || 0;
    let lastHomepageVisitDate = localStorage.getItem('homepageLastVisitDate');
    homepageVisitCount = parseInt(homepageVisitCount) + 1;
    localStorage.setItem('homepageVisitCount', homepageVisitCount);
    localStorage.setItem('homepageLastVisitDate', new Date().toISOString());

    if (homepageVisitCount > 1 && lastHomepageVisitDate) {
        const daysSinceLastVisit = Math.round((new Date() - new Date(lastHomepageVisitDate)) / (1000 * 60 * 60 * 24));
        trackHomepageEvent('homepage_return_visit', {
            visit_number: homepageVisitCount,
            days_since_last_visit: daysSinceLastVisit,
            visit_type: 'homepage_engagement'
        });
    }

    // Example usage - you can call these functions from your existing homepage logic:
    // trackHomepageNewsletterSignup('popup', 'email_list');
    // trackPopupInteraction('view', 'newsletter_popup');
    // trackMovementEngagement('click', 'hero');
    // trackHomepageSocialClick('instagram', 'footer');
    // trackHomepageNavigation('hero', 'stories');

    // Social Proof Metric Management
    document.addEventListener('DOMContentLoaded', function() {
        const heartsReachedElement = document.getElementById('heartsReached');
        
        // Function to format number with commas and round to nearest thousand
        function formatNumber(num) {
            return Math.round(num / 1000) * 1000;
        }
        
        // Function to update the metric display
        function updateHeartsReached(count) {
            if (!heartsReachedElement) return;
            const formattedCount = formatNumber(count);
            const displayText = `Over ${formattedCount.toLocaleString()}`;
            heartsReachedElement.textContent = displayText;
        }
        
        // Get cached value or use default
        function getCachedHeartsCount() {
            const cached = localStorage.getItem('heartsReachedCount');
            const lastUpdated = localStorage.getItem('heartsReachedLastUpdated');
            
            // Check if cache is older than 7 days
            if (lastUpdated) {
                const daysSinceUpdate = (Date.now() - parseInt(lastUpdated)) / (1000 * 60 * 60 * 24);
                if (daysSinceUpdate > 7) {
                    // Cache expired, could trigger API update here
                    console.log('Hearts count cache expired, consider updating');
                }
            }
            
            return cached ? parseInt(cached) : 758000; // Default fallback
        }
        
        // Update hearts count (can be called manually or via API)
        function updateHeartsCount(newCount) {
            localStorage.setItem('heartsReachedCount', newCount.toString());
            localStorage.setItem('heartsReachedLastUpdated', Date.now().toString());
            updateHeartsReached(newCount);
        }
        
        // Initialize with cached or default value
        const initialCount = getCachedHeartsCount();
        updateHeartsReached(initialCount);
        
        // Make function globally available for manual updates
        window.updateHeartsCount = updateHeartsCount;
        
        // Example: To manually update the count, call:
        // window.updateHeartsCount(800000);
    });

    </script>
    <script src="js/reset-banner.js"></script>
</body>
</html> 